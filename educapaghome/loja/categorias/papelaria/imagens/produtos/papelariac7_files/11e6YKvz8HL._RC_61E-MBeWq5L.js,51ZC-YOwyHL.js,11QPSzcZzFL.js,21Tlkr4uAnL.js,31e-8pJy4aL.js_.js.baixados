(function(d){var m=window.AmazonUIPageJS||window.P,f=m._namespace||m.attributeErrors,b=f?f("DetailPageImageBlockSubAssets@controller","DetailPageImageBlockSubAssets"):m;b.guardFatal?b.guardFatal(d)(b,window):b.execute(function(){d(b,window)})})(function(d,m,f){d.when("A","imageBlockUtils").register("ImageBlockModel",function(b,c){function p(b,a,q,e,n,h){c.isDefined(b)&&(g.type=b);c.isDefined(a)&&(g.index=a);c.isDefined(q)&&(g.thumbnailIndex=q);c.isDefined(e)&&(g.variant=e);c.isDefined(n)&&(g.color=
n);g.shoppableScene=h||null}function k(b){p("image",0,0,"MAIN",b||a.landingAsinColor||a.defaultColor,null)}function e(a){a=a.data;l=b.copy(g);p(a.type,a.index,a.thumbnailIndex,a.variant,a.color,a.shoppableScene)}function h(a){e(a);a=b.copy(a);a.data=b.copy(g);n.dispatch("updateView",a)}function d(){l=b.copy(g);k(g.color)}var a,n,g={},l={},m,f;return function(c,r){n=r;a=c;n.register("updateSelection",h);n.register("updateModel",e);n.register("resetModel",d);this.init=function(){k()};this.getCurrentItem=
function(){return b.copy(g)};this.getPreviousItem=function(){return b.copy(l)};this.setCurrentEvent=function(a){m=a};this.getCurrentEvent=function(){return m};this.setImmersiveViewModalInstance=function(a){f=a};this.getImmersiveViewModalInstance=function(){return f};this.updateTitle=function(b){a.title=b};this.setToPreviousItem=function(){p(l.type,l.index,l.thumbnailIndex,l.variant,l.color,l.shoppableScene)};this.setToCurrentItem=function(a){p(a.type,a.index,a.thumbnailIndex,a.variant,a.color,a.shoppableScene)}}});
"use strict";d.when("imageBlockUtils").register("ImageBlockState",function(b){return function(c,d,k){this.getImageHash=function(e){var h=k.getCurrentItem();e=b.getIndexForVariant(h.color,e||"MAIN",c);return b.getImageHash(h.color,e,c)};this.onImageUpdateForTwister=function(b){d.register("updateSelection",function(c){"swatchClick"===c.type&&"function"===typeof b&&b()})}}});"use strict";d.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",
function(b,c,d,k,e){var h={};return function(f){var a=this;a.dispatch=function(a,c){a=h[a];k.isDefined(a)&&b.each(a,function(a,b){b.call(m,c)})};a.register=function(a,b){k.isDefined(h[a])||(h[a]=[]);"function"===typeof b&&h[a].push(b)};a.model=new c(f,a);a.view=new d(f,a,a.model);a.api=new e(f,a,a.model);a.init=function(){a.model.init();a.view.init()};a.init()}});"use strict";d.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(b,c,f,k){b=b.extend(!0,
{},f,k);var e=new c(b);d.register("ImageBlockAPI",function(){return e.api});return e})});
/* ******** */
(function(M){var u=window.AmazonUIPageJS||window.P,Z=u._namespace||u.attributeErrors,P=Z?Z("DetailPageImageBlockSubAssets@baseViews","DetailPageImageBlockSubAssets"):u;P.guardFatal?P.guardFatal(M)(P,window):P.execute(function(){M(P,window)})})(function(M,u,Z){M.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAdditionalAltImageView",function(n,c,f,J,k,N,F){function K(d,b,x,p,t){if(!f.isjQueryObjDefined(d.find(".a-button-selected"))){var a=
C.getCurrentItem();if(!p||"chromeless-video"!==a.type||!h.autoplayVideo){p=0;"image"===a.type&&(p=Math.max(f.getIndexForVariant(a.color,a.variant,h),0));var g=0;f.isDefined(h.heroImage[a.color])&&(g=h.heroImage[a.color].length);t=p-(b>=h.maxAlts?h.maxAlts-t-g:0);b=0<=t?b+t:p+g;b>=x&&(p=0,b=g);x=f.getImageHash(a.color,p,h);-1!==x&&(B.dispatch("updateModel",{data:{index:p,thumbnailIndex:b,variant:x.variant,type:"image",shoppableScene:x.shoppableScene}}),x=d.find(".item").get(b),f.selectGivenThumbnail(c(x),
d))}}}function L(c){if(!h.useChildVideos)return f.lazyLoadingRequired(C.getCurrentItem(),C,h)?void 0:h.videos;if(h.colorToVideo[c])return h.colorToVideo[c];var b=h.colorToAsin[c];if(b&&b.asin){var d={};d.params={asin:b.asin,productGroupID:h.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:h.useChromelessVideoPlayer,isUDP:h.isUDP};h.isDPXFeatureEnabled||(d.success=function(b){videosOnTwisterRefresh(b)},J.load(VIDEO_AJAX_ENDPOINT,d));return h.colorToVideo&&h.colorToVideo[c]}}function z(q,
b,t){if((2===h.unrolledImageBlockTreatment||3===h.unrolledImageBlockTreatment)&&t)return q;var p=L(b),x=f.isDefined(p)&&0<p.length&&h.alwaysIncludeVideo?1:0;b=h.colorImages&&h.colorImages[b];p=q;var a=0;f.isDefined(b)&&(c.each(b,function(b,v){if(a>=h.maxAlts-x&&q<h.maxAlts+h.additionalNumberOfImageAlts){if(2===h.unrolledImageBlockTreatment||3===h.unrolledImageBlockTreatment){var g=c(".thumbItemUnrolled");g[q]?g[q].querySelector("img").src=v.thumb:c('\x3cli class\x3d"thumbItemUnrolled thumbTypeimage thumbIndex'+
b+'"\x3e\x3cspan class\x3d"a-list-item"\x3e \x3cspan class\x3d"a-button a-button-thumbnail a-button-toggle" id\x3d"a-autoid-'+(q+1)+'"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input" type\x3d"submit" aria-labelledby\x3d"a-autoid-'+(q+1)+'-announce"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true" id\x3d"a-autoid-'+(q+1)+'-announce"\x3e \x3cimg alt\x3d"" src\x3d"'+v.thumb+'"\x3e \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e \x3c/span\x3e\x3c/li\x3e').appendTo(c(".regularAltImageViewLayout"))}else f.createThumbnail({type:"image",
index:b,thumbnailIndex:q,variant:v.variant,shoppableScene:v.shoppableScene},v.thumb,d,"imageThumbnail");q++}a++}),N.isEnabled&&F.logAltImgRequestPlacedOnThumbnails(c,N,C),K(d,p,q,t,x));return q}function I(c,b){h.useIV&&f.isDefined(b.hiRes)&&c.css("cursor","pointer")}function E(d,b){if("image"===d.type&&U){var q=c("#image-canvas-caption #canvasCaption"),p=h.staticStrings,t=h.colorImages,a=d.color,g=d.index;if(f.isShoppableScenesEnabled()&&d.shoppableScene)var v=p.clickSceneTagsToShopProducts;else b&&
h.useIV?v=p.clickToExpand:t[a]&&t[a][g].hiRes&&h.useHoverZoom?(v=h.useHoverZoomIpad?p.touchToZoom:h.useClickZoom?p.clickToZoom:p.rollOverToZoom,h.hoverZoomIndicator&&(v="\x3cimg src\x3d'"+h.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+v)):h.useIV&&(v=p.clickToExpand);q.html(v)}}function G(d,b){var q="a-dynamic-image";if(!h.acEnabled){var t;c.each(d.main,function(a,b){f.isDefined(t)||(t=parseFloat(b[1]/b[0])<=parseFloat(h.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});q+=t}var e=f.getMaxDimensionsOfMainImage(d.main,
y,h),a=e[0],g=e[1];e=c("\x3cdiv\x3e\x3c/div\x3e");a={"max-height":a,"max-width":g};e.addClass(q).css(a).attr({"data-old-hires":d.hiRes,"data-a-manual-replacement":"true",onload:b}).data("a-dynamic-image",d.main);return e}function r(c,b,d){var f="desktop-dp-atf-ib-shoppablescenes-tags-"+c;"function"==typeof uet&&uet("bb",f,{wb:1});d.attr("data-a-image-name","shoppable-scene:"+c);d=w.find(".mirai-scene-image-block-template").clone().removeClass("mirai-scene-image-block-template aok-hidden").addClass("mirai-shoppable-scene");
d.addClass("celwidget").attr("cel_widget_id",f);d.children("span").css("display","inline-block");B.dispatch("initialize-shoppable-scene",{index:c,shoppableScene:b.shoppableScene,imageSource:b.hiRes||b.large||b.lowRes,$tagPlaceholder:d.find(".mirai-scene-tag-placeholder"),$viewProductsButton:d.find(".mirai-scene-view-products-button")});"MutationObserver"in u&&(new MutationObserver(function(d,a){d.forEach(function(g){"childList"===g.type&&g.target.classList.contains("mirai-scene-image-block-tag-container")&&
1===g.addedNodes.length&&"IMG"===g.addedNodes[0].tagName&&""!==g.addedNodes[0].src&&(g=g.addedNodes[0],"function"!==typeof g.onload&&(g.onload=function(){n.trigger("shoppable-scene-image-loaded",{index:c,shoppableScene:b.shoppableScene})}),a.disconnect())})})).observe(d.find(".mirai-scene-image-block-tag-container")[0],{subtree:!0,childList:!0,attributes:!1});"function"==typeof uet&&uet("cf",f,{wb:1});return d}function A(d,b,c){c=G(d,c);d=f.isShoppableScenesEnabled()&&d.shoppableScene?r(b,d,c):w.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate");
d.addClass("image item itemNo"+b+" maintain-height").attr({"data-csa-c-type":"uxElement","data-csa-c-element-type":"navigational","data-csa-c-action":"image-block-main-image-hover","data-csa-c-posy":b+1});d.find(".placeHolder").replaceWith(c);w.find(".list").append(d);n.loadImageManually(c);return d}function H(d){var b=y.css("height");null!==b&&d.find(".imgTagWrapper").css("height",b);d.addClass("selected");h.imgTagWrapperClasses&&d.find(".imgTagWrapper").addClass(h.imgTagWrapperClasses)}function O(d,
b,t,e){if(2!==h.unrolledImageBlockTreatment&&3!==h.unrolledImageBlockTreatment||e||"unavailable"===d.type){if("image"===d.type||"unavailable"===d.type||"lazy-loaded"===d.type){t=f.getImageHash(d.color,d.index,h);if(-1===t)return b={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},f.lazyLoadingRequired(d,C,h)||(B.dispatch("updateModel",b),f.showUnavailable(d.color)),-1;e=w.find(".item.itemNo"+d.thumbnailIndex);f.isjQueryObjDefined(e)||(e=A(t,d.thumbnailIndex,b));H(e);B.dispatch("loadMagnifier");
E(d);I(e,t);n.trigger("dp:image-block:update",t)}}else{d=h.colorImages&&h.colorImages[t];b=c(".unrolledImg");t=L(t);var y=f.isDefined(t)&&0<t.length&&h.alwaysIncludeVideo?1:0;b.length>h.maxAlts&&b.each(function(a){a>=h.maxAlts&&c(this).remove()});f.isDefined(d)&&c.each(d,function(a,b){a<h.maxAlts-y+h.additionalNumberOfImageAlts&&a>=h.maxAlts-y&&c('\x3cli data-csa-c-action\x3d"image-block-main-image-hover" data-csa-c-element-type\x3d"navigational" data-csa-c-posy\x3d"'+(a+y+1)+'" data-csa-c-type\x3d"uxElement" class\x3d"image item itemNo'+
(a+y)+' unrolledImg imgMedia"\x3e\x3cspan class\x3d"a-list-item"\x3e \x3cspan class\x3d"a-declarative" data-action\x3d"main-image-click" data-csa-c-type\x3d"widget" data-csa-c-func-deps\x3d"aui-da-main-image-click" data-main-image-click\x3d"{}" data-ux-click\x3d""\x3e \x3cdiv id\x3d"imgTagWrapperId" class\x3d"imgTagWrapper"\x3e \x3cdiv id\x3d"unrolledImgNo'+(a+y)+'"\x3e \x3cdiv class\x3d"a-image-container a-dynamic-image-container greyBackground" style\x3d"width:100%; height:600px;"\x3e \x3cimg alt\x3d"" src\x3d"'+
b.large+'" data-a-hires\x3d"'+b.hiRes+'"\x3e \x3c/div\x3e \x3c/div\x3e\x3c/div\x3e\x3c/span\x3e \x3c/span\x3e\x3c/li\x3e').appendTo(c(".unrolledScrollBox .list-unrolled"))})}}function l(d){var b=C.getCurrentItem().color;h.colorImages[b]||(h.colorImages[b]=d);d={type:"updatedData",data:C.getCurrentItem()};B.dispatch("updateView",d);(b=h.colorToAsin[b])&&b.asin&&M.register(f.rankedImagesReadyEvent(b.asin))}function e(){var d=w.find(".item .imgTagWrapper"),b=f.getContainerHeight(y,h.holderRatio,h.holderMaxHeight);
0<b&&(y.height(b),d.height(b));w.find("img.a-dynamic-image").each(function(){var b=c(this);b.data("a-manual-replacement")&&n.loadDynamicImage(this);var d=b.data("a-dynamic-image");d=f.getMaxDimensionsOfMainImage(d,y,h);b.css({"max-height":d[0]+"px","max-width":d[1]+"px"})})}function t(d){E(C.getCurrentItem(),"mouseenter"===d.type)}var X,h,C,B,d,w,y,Q,U=(k=n.state("imageBlockStateData"))?!k.shouldRemoveCaption:!0;return function(k,b,x,p){X=this;h=k;C=b;B=p;n.on("triggerImageAjax",l);h.colorImages[h.landingAsinColor]=
h.colorImages[h.defaultColor];X.render=function(b,a,g,v,t,m,e){w=g;d=v;y=t;Q=z(a,b,m);m||(a=C.getCurrentItem(),f.lazyLoadingRequired(a,C,h)&&B.dispatch("updateModel",{data:{type:"lazy-loaded"}}));a=C.getCurrentItem();g=!m;f.lazyLoadingRequired(a,C,h)||(c("#imageBlock").css("opacity","1"),w.css("opacity","1"),f.spinner(w,!1),w.find("li").removeClass("selected"),U&&c("#image-canvas-caption #canvasCaption").empty(),f.hideUnavailable(),g&&w.find(".list .item").remove());O(C.getCurrentItem(),e,b,m);return Q};
X.update=function(b){};h.overrideAltImageClickAction&&f.addTag("clickEnabledOnAltImages");B.register("imageHover",t);B.register("resize",e)}});"use strict";M.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",function(n,c,f){var u,k,N,F;return function(c,J,z,I){u=this;k=c;N=I;u.render=function(c,z,r,A,J,O,l){F=A;u=this;r=k.maxAlts;A=z;J=k.colorImages[c]?k.colorImages[c].length:0;J+=f.getVideosCount(c,k);c=k.heroImage[c];O=0;c&&(O=c.length);c=J+O;c>r&&(r=c-r,c=F.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),
r+="+",A={type:"ingress",index:0,thumbnailIndex:z,variant:""},c.find("#altIngressText").append(r),n.declarative.create(c,"thumb-action",A),F.append(c),A=z++);return A};u.update=function(c){"ingress"===c.data.type&&"click"===c.type&&N.dispatch("imageClick",c)}}});"use strict";M.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",function(n,c,f,u){function k(t,e,h,l){if(!f.isjQueryObjDefined(t.find(".a-button-selected"))){var B=A.getCurrentItem();if(!l||"chromeless-video"!==
B.type||!r.autoplayVideo){l=0;if("hero-image"===B.type){l=F(B.color,B.variant);if(-1===l)return;l=-1!==l?l:0}var d=e+l;d>=h&&(l=0,d=e);e=u.getHeroImageHash(r,B.color,l);-1!==e&&(H.dispatch("updateModel",{data:{index:l,thumbnailIndex:d,variant:e.variant,type:"hero-image"}}),e=t.find(".item").get(d),f.selectGivenThumbnail(c(e),t))}}}function J(t,e,h){if("hero-video"===A.getCurrentItem().type)return t;e=r.heroImage&&r.heroImage[e];var l=t;f.isDefined(e)&&(c.each(e,function(c,d){t<r.maxAlts&&(f.createThumbnail({type:"hero-image",
index:c,thumbnailIndex:t,variant:d.variant},d.thumb,O,"imageThumbnail"),t++)}),k(O,l,t,h));return t}function F(t,e){var h=r.heroImage;if(1>h.length||!f.isDefined(h[t])||!f.isDefined(e))return-1;var l=-1;c.each(h[t],function(c,d){d.variant===e&&(l=c)});return l}function K(){if(l.length&&r.repositionHeroImage){var c=u.getHeroDimParams(r,A.getCurrentItem());if(f.isDefined(c)){var e=f.isDefined(c.xPos)?c.xPos+"px "+c.yPos+"px ":"center "+c.yPos+"px ";l.css({"background-position":e,"background-size":c.width+
"px "+c.height+"px ","max-width":c.width+"px ","min-height":c.height+"px ",filter:"","-ms-filter":""})}}}function L(c,e,h,k){if(l.length&&c&&e){if("function"===typeof h||k){var t=new Image;t.onload=k?function(){l.css("background-image",'url("'+c+'")')}:h;t.src=c}h=e[1];t=e[0];k||l.css({"background-image":'url("'+c+'")'});if(r.repositionHeroImage&&(e=u.getHeroDimParams(r,A.getCurrentItem(),e),f.isDefined(e))){h=e.width;t=e.height;var d=f.isDefined(e.xPos)?e.xPos+"px "+e.yPos+"px ":"center "+e.yPos+
"px "}l.css({"background-position":d,"background-size":h+"px "+t+"px ","max-width":h+"px ","min-height":t+"px ",filter:"","-ms-filter":""})}}function z(f,e,h,l){f=u.getHeroImageHash(r,f,e);if(-1===f)return-1;e=c.map(f.main,function(c,d){return d})[0];L(e,f.main[e],h,l)}function I(c,f,e){if("hero-image"!==c.type)return-1;var h=F(c.color,A.getCurrentItem().variant);h=-1!==h?h:0;if(-1===u.getHeroImageHash(r,c.color,h))return-1;var l=A.getCurrentItem();c.thumbnailIndex=l.thumbnailIndex;c.type=l.type;
c.variant=l.variant;c.index=h;E(c,f,e)}function E(c,f,h){var t=u.getHeroImageHash(r,c.color,c.index);var k=c&&e&&n.equals(c,e)?!0:!1;e||(e=c);if(!k&&c||f)z(c.color,c.index,f,h),e=c;l.removeClass("hide-background");n.trigger("dp:image-block:update",t)}var G,r,A,H,O,l,e={};return function(e,k,h,n){G=this;r=e;A=k;H=n;r.heroImage[r.landingAsinColor]=r.heroImage[r.defaultColor];G.render=function(f,d,e,h,t,k,n){O=h;l=c("#heroImage");f=J(d,f,k);I(A.getCurrentItem(),n,k);return f};G.update=function(c){var d=
c.data;"ingress"!==d.type&&l.addClass("hide-background");"swatchHover"===c.type?c.captured||(d.type=A.getCurrentItem().type,-1!==I(d)&&(c.captured=!0)):"hero-image"===d.type&&(E(d),"click"!==c.type&&r.usePeekHover||f.selectGivenThumbnail(c.$declarativeParent,O))};H.register("resize",K)}});"use strict";M.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(n,c,f,J,k,N){function F(c){O?c.css("cursor","url('"+E.staticImages.zoomIn+
"'), auto"):(c.css("cursor","-webkit-zoom-in"),c.css("cursor","-moz-zoom-in"),c.css("cursor","zoom-in"))}function K(c){var e=c.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);c={};if(f.isDefined(e)){e=e[1].split("_");for(var l=0;l<e.length;l++){var k=e[l].match(/^([A-Z]+)(\d+(\.\d+)?)$/);f.isDefined(k)&&(c[k[1]]=parseInt(k[2],10))}}return c}function L(l,e){function t(){if(e.useClickZoom){var a=e.offsetInClickZoom;a=[Math.min(1,Math.max(0,x[0]-(D[0]+a))/(D[2]-2*a)),Math.min(1,Math.max(0,x[1]-(D[1]+a))/
(D[3]-2*a))]}else a=b&&b.updatePosition();if(a&&q&&q.detailSize){var c=[q.detailSize[0]-q.rect.width,q.detailSize[1]-q.rect.height];n.capabilities.rtl?q.detailImage.get(0).style.right=-(a[0]*c[0])+"px":q.detailImage.get(0).style.left=-(a[0]*c[0])+"px";q.detailImage.get(0).style.top=-(a[1]*c[1])+"px"}}function r(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function h(a){var b=m?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";x=m?[b.pageX,b.pageY]:[a.pageX,a.pageY];
if(n.capabilities.rtl){var g=c(u).width();x=m?[g-b.pageX,b.pageY]:[g-a.pageX,a.pageY]}}function z(a){m&&a.preventDefault();h(a);e.useClickZoom?a=[D[0],D[1],D[0]+D[2],D[1]+D[3]]:(a=b?b.offset:l.offsetParent().offset(),a=E.acEnabled?[a.left,a.top,Q.width()+a.left,Q.height()+a.top]:[p[0]+a.left,p[1]+a.top,p[0]+p[2]+a.left,p[1]+p[3]+a.top]);x[0]<a[0]||x[1]<a[1]||x[0]>=a[2]||x[1]>=a[3]||E.acEnabled&&!r(l)?(e.fadeMagnifier?S||(S=!0,ca=setTimeout(function(){B(!0)},500)):e.useClickZoom||B(),I&&(I=!1,clearTimeout(G))):
(I||(I=!0,G=setTimeout(function(){J.postCountMetric("dppc_hoverZoomOpened");k.isEnabled&&N.logHoverZoomRequestServed(k)},1E3)),e.fadeMagnifier&&S&&(S=!1,clearTimeout(ca)),t())}function B(a){a&&y.suppressMagnifier(!0);if(g&&(q&&q.hide(),b&&(b.destroy(),b=null),g=!1,m?(l.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),c(document).trigger("disengaged.magnifier")):c(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),w(),a))l.one("click.magnifier touchstart.magnifier",
function(a){d(a,!0)})}function d(a,d){d&&y.suppressMagnifier(!1);if(!g&&!v&&(0===aa&&(J.postCountMetric("dppc_hoverTime",new Date-(u.ue&&u.ue.t0||0)),aa=1),T[W]||(J.postCountMetric("dppc_hoverMain"),T[W]=1),p=[l.position().left,l.position().top,l.width(),l.height()],W&&(h(a),q?q.refit().show():q=new R,e.useClickZoom||(b=b||new ba),D=q.getWindowSize(),t()),g=!0,m?(l.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",z).bind("touchend.magnifier",B),c(document).trigger("engaged.magnifier")):
(E.acEnabled?Q.unbind("mousemove.magnifier"):l.unbind("mousemove.magnifier"),c(document).trigger("engaged.magnifier").bind("mousemove.magnifier",z)),d&&(a=c("#zoomWindow"),0<a.length)))a.one("click.magnifier touchend.magnifier",function(a){B(!0)})}function w(){e.useHoverZoom&&(m?l.bind("touchstart.magnifier touchmove.magnifier",d):E.acEnabled?r(l)&&Q.bind("mousemove.magnifier",d):l.bind("mousemove.magnifier",d))}var y=this,Q=l.offsetParent(),A={detailImageUrl:l.attr("data-old-hires"),location:"over",
locationElement:l,prelaod:"ready",zIndex:50,offsetInClickZoom:50};e=c.extend(A,e);e.adjustment=[10,0,-10,0];var q=null,b=null,x=null,p=null,D=null,a={"null":1,"":1,undefined:1},g=!1,v=!1,W=e.detailImageUrl,m=e.useHoverZoomIpad||0,aa=0,T={},ba=function(){function a(a){var c=Math.round(Math.min(l.width(),q.rect.width/a));a=Math.round(Math.min(l.height(),q.rect.height/a));m.css({width:c,height:a});g=[c,a]}var b=this,g=[0,0],d=(q.detailSize&&q.detailSize[0]||5E8)/p[2],f=(q.detailSize&&q.detailSize[1]||
5E8)/p[3];d=f>d?f:d;c("#magnifierLens").remove();var m=c("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});e.generalImageUrls.zoomLensBackground&&m.css({backgroundImage:"url("+e.generalImageUrls.zoomLensBackground+")"});E.showMagnifierOnHover?F(m):m.css("cursor","pointer");b.updatePosition=function(){var a=[p[2]-g[0],p[3]-g[1]],c=0>=a[0]?.5:Math.max(0,Math.min(1,(x[0]-g[0]/2-p[0]-b.offset.left)/a[0])),d=0>=a[1]?.5:Math.max(0,Math.min(1,(x[1]-g[1]/2-p[1]-b.offset.top)/a[1])),f=p[0]+
Math.round(c*a[0]);a=p[1]+Math.round(d*a[1]);m.get(0).style.left=f+"px";m.get(0).style.top=a+"px";return[c,d]};b.destroy=function(){m.remove()};b.offset=l.offsetParent().offset();a(d);b.updatePosition();m.appendTo(l.parent());q.detailImage[0].complete||q.detailImage.load(function(){var c=q.detailImage.width()/p[2];a(c);b.updatePosition()})};ba.preload=function(){y.preload(e.generalImageUrls.lensBackgroundUrl)};var R=function(){function a(){var a={};if("over"===e.location){a=e.useClickZoom;var b={},
m=c("#leftCol"),h=c("#centerCol"),y=c("#rightCol"),aa=c("#hover-zoom-end"),R=c("#actionPanelContainer"),ta=f.isjQueryObjDefined(m)?m.outerHeight():h.outerHeight();b.top=f.isjQueryObjDefined(m)?m.offset().top:h.offset().top;b.bottom=ta+b.top;b.right=f.isjQueryObjDefined(y)?y.offset().left:R.offset().left;b.left=a?0:m.offset().left+m.outerWidth();f.isjQueryObjDefined(aa)&&aa.offset().top>b.bottom&&(b.bottom=aa.offset().top);a=b}else"right"===e.location&&(a=l.offset(),a={left:a.left+l.outerWidth(),top:a.top,
right:a.left+l.outerWidth()+400,bottom:a.top+400});e.minHeightElement&&(a.bottom=Math.max(a.bottom,a.top+c(e.minHeightElement).outerHeight()));a.bottom=Math.min(a.bottom,c(u).scrollTop()+c(u).height());a.left+=d[0];a.top+=d[1];a.right+=d[2];a.bottom+=d[3];a.width=a.right-a.left;a.height=a.bottom-a.top;e.enhancedHoverOverlay&&f.isDefined(u.pageXOffset)&&(b=c(u).width(),a.width=b-a.left+u.pageXOffset-18,a.height-=14);v.css({left:a.left,top:a.top,width:a.width,height:a.height});g.rect=a;return g}function b(a){var b=
new Image;g.detailSize=[0,0];b.onload=function(){g.detailSize=[b.width,b.height];t()};b.src=a.attr("src");if(0<b.width&&0<b.height)g.detailSize=[b.width,b.height];else if(e.detailImageSize)g.detailSize=e.detailImageSize;else{a=K(b.src);var c=p[2]/p[3];a.SS||a.AA?(a=a.SS||a.AA,g.detailSize=[a,a]):a.SX?g.detailSize=[a.SX,Math.round(a.SX/c)]:a.SY?g.detailSize=[Math.round(a.SY*c),a.SY]:a.SL&&(g.detailSize=1<=c?[a.SL,Math.round(a.SL/c)]:[Math.round(a.SL*c),a.SL])}}var g=this,d=e.adjustment;c("#zoomWindow").remove();
var m={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:e.zIndex};e.enhancedHoverOverlay&&(m.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",m.border="1px solid #949494",m.borderColor="rgb(148,148,148)");var v=c("\x3cdiv id\x3d'zoomWindow' /\x3e").css(m);e.fadeMagnifier&&v.fadeIn(200);e.useClickZoom&&(O?v.css("cursor",'url("'+e.zoomOutIcon+'"), auto'):(v.css("cursor","-webkit-zoom-out"),v.css("cursor","-moz-zoom-out"),v.css("cursor","zoom-out")));g.updateImage=function(a){a=c("\x3cimg id\x3d'detailImg' src\x3d'"+
a+"'/\x3e").css("position","absolute");g.detailImage&&g.detailImage.remove();v.append(a);c(document).trigger("updated.magnifier");g.detailImage=a;b(g.detailImage)};g.refit=function(){a();b(g.detailImage);return g};e.fadeMagnifier?(g.show=function(){v.fadeIn(200);return g},g.hide=function(){v.fadeOut(200);return g}):(g.show=function(){v.show();return g},g.hide=function(){v.hide();return g});g.destroy=function(){v.remove();return g};g.getWindowSize=function(){return[g.rect.left,g.rect.top,g.rect.width,
g.rect.height]};g.updateImage(W);a();v.appendTo(document.body)},S=!1,ca,I=!1,G;y.preload=function(b){b=c.makeArray(b);for(var g=b.length,d=0;d<g;d++)b[d]instanceof Array?y.preload(b[d]):"string"===typeof b[d]&&b[d]&&!a[b[d]]&&(a[b[d]]=new Image,a[b[d]].src=b[d])};y.changeImage=function(a,b){g&&B();W=b;l.attr("src",a);y.preload(a);p=[l.position().left,l.position().top,l.width(),l.height()];b&&("immediately"===e.preload?y.preload(b,!0):c(u).ready(function(){y.preload(b)}),q?q.updateImage(b):l.attr("data-old-hires",
b))};y.destroy=function(){E.acEnabled?Q.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):l.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");c(document).unbind("mousemove.magnifier");b&&b.destroy();b=null;q&&q.destroy();q=null};y.detailImage=function(){return q.detailImage};y.suppressMagnifier=function(a){v=a};y.isEngaged=function(){return g};y.engageMagnifier=d;y.disengageMagnifier=B;l[0].complete?w():l.one("load",w);y.preload(l.attr("src"));
u.performance&&performance.now&&u.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(e.preload){var L=e.detailImageUrl;A=function(){y.preload(L,!0);e.useClickZoom||ba.preload()};var V=e.preload;V.constructor!==Array&&(V=[V]);for(var H=0;H<V.length;H++)if("immediately"===V[H])A();else if(c(u)[V[H]])c(u)[V[H]](A);else c(u).bind(V[H],A)}return y}function z(){if(E.useHoverZoom){var l={adjustment:[0,0,1,1],generalImageUrls:E.staticImages,location:"over",minHeightElement:"#imageBlock",
preload:"ready",zIndex:199,useHoverZoomIpad:E.useHoverZoomIpad,useHoverZoom:E.useHoverZoom,useClickZoom:E.useClickZoom,fadeMagnifier:E.fadeMagnifier,zoomOutIcon:E.staticImages.zoomOutCur,enhancedHoverOverlay:E.enhancedHoverOverlay||E.atfEnhancedHoverOverlay};A&&(A.destroy(),A=Z);var e=H.find(".image.item.selected:not(.mirai-shoppable-scene) img[data-old-hires]").not("[data-old-hires\x3d'']");f.isjQueryObjDefined(e)?E.useClickZoom?(e.one("click.loadmagnifier touchstart.loadmagnifier",function(c){A=
new L(e,l);A.engageMagnifier(c,!0)}),O?e.css("cursor",'url("'+E.staticImages.zoomInCur+'"), auto'):(e.css("cursor","-webkit-zoom-in"),e.css("cursor","-moz-zoom-in"),e.css("cursor","zoom-in"))):A=new L(e,l):k.isEnabled&&N.logHoverZoomApplicability(c,k)}}var I,E,G,r,A,H,O=navigator.userAgent.match(/msie|trident/i);return function(c,f,t,n){I=this;E=c;G=f;k.refToModel=G;r=n;I.render=function(c,f,e,d,l,y){H=e;A&&(A.destroy(),A=Z)};I.update=function(c){};r.register("loadMagnifier",z);r.register("resize",
z)}});"use strict";M.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(n,c,f,J){function k(c,k,n){c=(c=n?n:f.getColorFromState(k.getState().hovered_variations,K))&&""!==c?c:K.defaultColor;z.dispatch("updateView",{type:"swatchHover",data:{color:c}});J.postCountMetric("swatchHover")}function N(c,k,n,r){c=(c=r?r:f.getColorFromState(k.getState().selected_variations,K))&&""!==c?c:K.defaultColor;c===L.getCurrentItem().color?"function"===typeof n&&n():(z.dispatch("updateSelection",
{type:"swatchClick",data:{color:c},onload:function(){var c={hasComponents:!0,components:[{name:"mainImage"}]};"function"===typeof u.markFeatureRender&&u.markFeatureRender("imageblock",c);n()}}),J.postCountMetric("swatchClick"))}var F,K,L,z;return function(c,f,u,r){F=this;K=c;L=f;z=r;n.on("image-block-twister-swatch-hover",k);n.on("image-block-twister-swatch-click",N);F.render=function(c,f,k,l,e){};F.update=function(c){}}});"use strict";M.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric",
"logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(n,c,f,J,k,N,F){function K(a,b,g,e){if(!f.isjQueryObjDefined(a.find(".a-button-selected"))){var m=w.getCurrentItem();if(!e||"chromeless-video"!==m.type||!d.autoplayVideo)if(e=0,"image"===m.type&&(e=Math.max(E(m.color,m.variant),0)),!(m.thumbnailIndex>=d.maxAlts&&0!=e)){var v=b+e;v>=g&&(e=0,v=b);b=f.getImageHash(m.color,e,d);-1!==b&&(y.dispatch("updateModel",{data:{index:e,thumbnailIndex:v,variant:b.variant,type:"image",
shoppableScene:b.shoppableScene}}),b=a.find(".item").get(v),f.selectGivenThumbnail(c(b),a))}}}function L(a,b,g){if((2===d.unrolledImageBlockTreatment||3===d.unrolledImageBlockTreatment)&&g)return a;var m=d.colorImages&&d.colorImages[b];b=a;2!==d.unrolledImageBlockTreatment&&3!==d.unrolledImageBlockTreatment||c(".thumbItemUnrolled").each(function(a){(!c(this)[0].classList.contains("thumbTypeimage")||a>=m.length||a>=d.maxAlts)&&c(this).remove()});f.isDefined(m)&&(c.each(m,function(b,g){if(a<d.maxAlts)if(2===
d.unrolledImageBlockTreatment||3===d.unrolledImageBlockTreatment){a++;var e=c(".thumbItemUnrolled");e[b]?e[b].querySelector("img").src=g.thumb:c('\x3cli class\x3d"thumbItemUnrolled thumbTypeimage thumbIndex'+b+'"\x3e\x3cspan class\x3d"a-list-item"\x3e \x3cspan class\x3d"a-button a-button-thumbnail a-button-toggle" id\x3d"a-autoid-'+a+'"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input" type\x3d"submit" aria-labelledby\x3d"a-autoid-'+a+'-announce"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true" id\x3d"a-autoid-'+
a+'-announce"\x3e \x3cimg alt\x3d"" src\x3d"'+g.thumb+'"\x3e \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e \x3c/span\x3e\x3c/li\x3e').appendTo(c(".regularAltImageViewLayout"))}else b={type:"image",index:b,thumbnailIndex:a,variant:g.variant,shoppableScene:g.shoppableScene},g=f.createThumbnail(b,g.thumb,q,"imageThumbnail"),(d.collapsibleThumbnails||d.desktopCollapsibleThumbnails)&&f.updateImageThumbnailOverlay(g,b,m),a++}),N.isEnabled&&F.logAltImgRequestPlacedOnThumbnails(c,N,w),K(q,b,a,g));return a}function z(a,
b){d.useIV&&f.isDefined(b.hiRes)&&a.css("cursor","pointer")}function I(a,b){if("image"===a.type&&W){var g=c("#image-canvas-caption #canvasCaption"),m=d.staticStrings,e=d.colorImages,v=a.color,h=a.index;if(f.isShoppableScenesEnabled()&&a.shoppableScene)var l=m.clickSceneTagsToShopProducts;else b&&d.useIV?l=m.clickToExpand:e[v]&&e[v][h].hiRes&&d.useHoverZoom?(l=d.useHoverZoomIpad?m.touchToZoom:d.useClickZoom?m.clickToZoom:m.rollOverToZoom,d.hoverZoomIndicator&&(l="\x3cimg src\x3d'"+d.staticImages.hoverZoomIcon+
"'/\x3e\x26nbsp;"+l)):d.useIV&&(l=m.clickToExpand);g.html(l)}}function E(a,b){return f.getIndexForVariant(a,b,d)}function G(a,b,c){var f=b.thumbnailIndex,m=d.colorToAsin[b.color]&&d.colorToAsin[b.color].asin;b="altImageHover"===c&&p&&p.altImageIdx===f&&p.asin===m&&"swatchClick"===p.event?!0:"swatchHover"===c?p&&p.asin===m&&p.event===c:p&&p.altImageIdx===f&&p.asin===m&&p.event===c;if(!b){var e="#",h=a.find(".imgTagWrapper img").get(0);h&&(e=h.src);a=new Image;a.onload=function(){if(h){h.src=e;var a=
h.width,b=h.height,d=h.naturalWidth,l=h.naturalHeight;try{var y=(Math.abs(a/d*l-b)/b).toFixed(2);.01<y&&(u.ue&&((("landing"!==c||g||v)&&"swatchClick"!==c||u.ue.count("imageBlock-PC-hi_res_image_distortion",1),"landing"===c||"swatchClick"===c)?u.ue.count("imageBlock-PC-hi_res_landing_image_distortion",1):"swatchHover"!==c||v?"altImageHover"!==c||g||(u.ue.count("imageBlock-PC-hi_res_alt_image_distortion",1),g=!0):(u.ue.count("imageBlock-PC-hi_res_swatch_hover_image_distortion",1),v=!0)),u.ueLogError&&
(a={logLevel:"WARN",attribution:"imageBlock-PC-hi_res_image_distortion"},u.ueLogError("swatchHover"===c?{message:"[ImageBlock Hi-Res: Size distortion for ASIN: "+m+" Event:"+c+" Diff:"+y.toString()+"]"}:{message:"[ImageBlock Hi-Res: Size distortion for ASIN: "+m+" at altImageIdx "+f+" Event:"+c+" Diff:"+y.toString()+"]"},a)))}catch(ja){u.ueLogError&&(a={logLevel:"WARN",attribution:"imageBlock-PC-hi_res_log_distortion_catch_exception"},u.ueLogError(ja,a))}}};"#"!==e&&(a.src=e);p.altImageIdx=f;p.asin=
m;p.event=c}}function r(a,b){var g="a-dynamic-image";if(!d.acEnabled){var m;c.each(a.main,function(a,b){f.isDefined(m)||(m=parseFloat(b[1]/b[0])<=parseFloat(d.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});g+=m}var e=f.getMaxDimensionsOfMainImage(a.main,x,d),v=e[0],h=e[1];e=c("\x3cdiv\x3e\x3c/div\x3e");v={"max-height":v,"max-width":h};e.addClass(g).css(v).attr({"data-old-hires":a.hiRes,"data-a-manual-replacement":"true",onload:b}).data("a-dynamic-image",a.main);return e}function A(a,
c,g){var f="desktop-dp-atf-ib-shoppablescenes-tags-"+a;"function"==typeof uet&&uet("bb",f,{wb:1});g.attr("data-a-image-name","shoppable-scene:"+a);g=b.find(".mirai-scene-image-block-template").clone().removeClass("mirai-scene-image-block-template aok-hidden").addClass("mirai-shoppable-scene");g.find(".mirai-scene-image-block-tag-container").attr({"data-csa-c-content-id":f,"data-csa-c-type":"widget","data-csa-c-asin":d.mediaAsin,"data-csa-c-physical-id":c.shoppableScene.physicalId});g.children("span").css("display",
"inline-block");y.dispatch("initialize-shoppable-scene",{index:a,shoppableScene:c.shoppableScene,imageSource:c.hiRes||c.large||c.lowRes,$tagPlaceholder:g.find(".mirai-scene-tag-placeholder"),$viewProductsButton:g.find(".mirai-scene-view-products-button")});"MutationObserver"in u&&(new MutationObserver(function(b,g){b.forEach(function(b){"childList"===b.type&&b.target.classList.contains("mirai-scene-image-block-tag-container")&&1===b.addedNodes.length&&"IMG"===b.addedNodes[0].tagName&&""!==b.addedNodes[0].src&&
(b=b.addedNodes[0],"function"!==typeof b.onload&&(b.onload=function(){n.trigger("shoppable-scene-image-loaded",{index:a,shoppableScene:c.shoppableScene})}),g.disconnect())})})).observe(g.find(".mirai-scene-image-block-tag-container")[0],{subtree:!0,childList:!0,attributes:!1});"function"==typeof uet&&uet("cf",f,{wb:1});return g}function H(a,c,g){g=r(a,g);a=f.isShoppableScenesEnabled()&&a.shoppableScene?A(c,a,g):b.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate");a.addClass("image item itemNo"+
c+" maintain-height").attr({"data-csa-c-type":"uxElement","data-csa-c-element-type":"navigational","data-csa-c-action":"image-block-main-image-hover","data-csa-c-posy":c+1});a.find(".placeHolder").replaceWith(g);b.find(".list").append(a);n.loadImageManually(g);n.trigger("dp:image-block:imageBlockImageLoad",c);return a}function O(a){var b=x.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");d.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(d.imgTagWrapperClasses)}
function l(a){if(a.isUserGenerated){var b=w.getPreviousItem(),c=a.variant;f.isDefined(c)&&b.thumbnailIndex!==a.thumbnailIndex&&(N.isEnabled&&F.logAltImgRequestServed(N),k.postCountMetric("ImageThumbnailSelectedVariant:"+c),0===c.indexOf("IG")&&(k.postCountMetric("IGImageSelectedVariant:"+c),k.postCountMetric("IGImageSelectedEvent:"+a.interaction)))}}function e(a,e,h,p){if(2!==d.unrolledImageBlockTreatment&&3!==d.unrolledImageBlockTreatment||p||"unavailable"===a.type){if("image"===a.type||"unavailable"===
a.type||"lazy-loaded"===a.type){(m=f.isDefined(e))&&k.postCountMetric("mainImageUpdateOnTwisterVariationClick");h=f.getImageHash(a.color,a.index,d);if(-1===h)return e={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},f.lazyLoadingRequired(a,w,d)||(y.dispatch("updateModel",e),f.showUnavailable(a.color)),-1;p=b.find(".item.itemNo"+a.thumbnailIndex);f.isjQueryObjDefined(p)||(p=H(h,a.thumbnailIndex,e),m?(v=g=!1,G(p,a,"swatchClick")):G(p,a,"altImageHover"));O(p);y.dispatch("loadMagnifier");
I(a);z(p,h);l(a);n.trigger("dp:image-block:update",h)}}else if(a=d.colorImages&&d.colorImages[h],c(".unrolledImg").each(function(a){c(this).remove()}),f.isDefined(a)){c.each(a,function(a,b){if(a<d.maxAlts){var g=c(".unrolledImg");g[a]?c(".unrolledImg #unrolledImgNo"+a+" img").replaceWith('\x3cimg alt\x3d"" src\x3d"'+b.large+'" data-a-hires\x3d"'+b.hiRes+'" data-a-manual-replacement\x3d"true"\x3e'):a>=g.length&&c('\x3cli data-csa-c-action\x3d"image-block-main-image-hover" data-csa-c-element-type\x3d"navigational" data-csa-c-posy\x3d"'+
(a+1)+'" data-csa-c-type\x3d"uxElement" class\x3d"image item itemNo'+a+' unrolledImg imgMedia"\x3e\x3cspan class\x3d"a-list-item"\x3e \x3cspan class\x3d"a-declarative" data-action\x3d"main-image-click" data-csa-c-type\x3d"widget" data-csa-c-func-deps\x3d"aui-da-main-image-click" data-main-image-click\x3d"{}" data-ux-click\x3d""\x3e \x3cdiv id\x3d"imgTagWrapperId" class\x3d"imgTagWrapper"\x3e \x3cdiv id\x3d"unrolledImgNo'+a+'"\x3e \x3cdiv class\x3d"a-image-container a-dynamic-image-container greyBackground" style\x3d"width:100%; height:600px;"\x3e \x3cimg alt\x3d"" src\x3d"'+
b.large+'" data-a-hires\x3d"'+b.hiRes+'" data-a-manual-replacement\x3d"true"\x3e \x3c/div\x3e \x3c/div\x3e\x3c/div\x3e\x3c/span\x3e \x3c/span\x3e\x3c/li\x3e').appendTo(c(".unrolledScrollBox .list-unrolled"))}});n.loadHiResImage(document.querySelectorAll(".unrolledImg.imgMedia img"));var m=f.isDefined(e);m&&(k.postCountMetric("mainImageUpdateOnTwisterVariationClick"),e())}}function t(a){var c=Math.max(E(a.color,w.getCurrentItem().variant),0);c=f.getImageHash(a.color,c,d);if(-1===c)return f.lazyLoadingRequired(a,
w,d)||f.showUnavailable(a.color),-1;var g=b.find(".swatchHoverExp"),e=r(c);g.find(".imgTagWrapper").html(e);n.loadImageManually(e);k.postCountMetric("mainImageUpdateOnTwisterVariationHover");O(g);G(g,a,"swatchHover");n.trigger("dp:image-block:update",c)}function X(a,g){f.lazyLoadingRequired(a,w,d)||(c("#imageBlock").css("opacity","1"),b.css("opacity","1"),f.spinner(b,!1),b.find("li").removeClass("selected"),W&&c("#image-canvas-caption #canvasCaption").empty(),f.hideUnavailable(),g&&b.find(".list .item").remove())}
function h(){var a=b.find(".item .imgTagWrapper"),g=f.getContainerHeight(x,d.holderRatio,d.holderMaxHeight);0<g&&(x.height(g),a.height(g));b.find("img.a-dynamic-image").each(function(){var a=c(this);a.data("a-manual-replacement")&&n.loadDynamicImage(this);var b=a.data("a-dynamic-image");b=f.getMaxDimensionsOfMainImage(b,x,d);a.css({"max-height":b[0]+"px","max-width":b[1]+"px"})})}function C(a){I(w.getCurrentItem(),"mouseenter"===a.type)}var B,d,w,y,Q,U,q,b,x,p={},D,a=null,g=!1,v=!1,W=(J=n.state("imageBlockStateData"))?
!J.shouldRemoveCaption:!0;n.on("triggerImageAjax",function(a){var b=w.getCurrentItem().color;d.colorImages[b]||(d.colorImages[b]=a);a={type:"updatedData",data:w.getCurrentItem()};y.dispatch("updateView",a);(b=d.colorToAsin[b])&&b.asin&&M.register(f.rankedImagesReadyEvent(b.asin))});return function(g,v,l,p){B=this;d=g;w=v;y=p;d.colorImages[d.landingAsinColor]=d.colorImages[d.defaultColor];B.render=function(g,v,h,m,l,k,p,n){b=2!==d.unrolledImageBlockTreatment&&3!==d.unrolledImageBlockTreatment?h:c(".unrolledScrollBox");
q=m;x=l;D=L(v,g,k);k?0===v&&G(b.find(".item.itemNo0"),w.getCurrentItem(),"landing"):(v=w.getCurrentItem(),f.lazyLoadingRequired(v,w,d)&&y.dispatch("updateModel",{data:{type:"lazy-loaded"}}));X(w.getCurrentItem(),!k);2===d.unrolledImageBlockTreatment||3===d.unrolledImageBlockTreatment?"swatchClick"===n&&d&&d.colorImages?(a=d.colorImages[g],e(w.getCurrentItem(),p,g,k)):"updatedData"===n&&d&&d.colorImages&&d.colorImages[g]!==a&&(a=d.colorImages[g],e(w.getCurrentItem(),p,g,k)):e(w.getCurrentItem(),p,
g,k);return D};f.isImageBlockGridViewHoverDelayEnabled()?B.update=function(a){var b=a.data;w.setCurrentEvent(a);"ingress"!==b.type&&"swatchHover"!==a.type&&(w.setToPreviousItem(),"mouseenter"===a.type?(U&&clearTimeout(U),U=setTimeout(function(){w.setToCurrentItem(b);X(a.data,!1)},f.getHoveringDelayTimer())):"mouseleave"===a.type?U&&clearTimeout(U):"click"===a.type&&(w.setToCurrentItem(b),X(a.data,!1)));"swatchHover"===a.type?("ingress"!==b.type&&X(a.data,!1),b.color===w.getCurrentItem().color?e(w.getCurrentItem(),
null,b.color,!0):a.captured||-1===t(b)||(a.captured=!0)):"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,"mouseenter"===a.type?(k.postCountMetric("dpcc_imageThumbHovered_"+(b.thumbnailIndex+1)+"_"+D),Q&&clearTimeout(Q),Q=setTimeout(function(){e(b,null,b.color,!0);d.usePeekHover||f.selectGivenThumbnail(a.$declarativeParent,q)},f.getHoveringDelayTimer())):"mouseleave"===a.type?Q&&clearTimeout(Q):"click"===a.type&&(e(b,null,b.color,!0),f.selectGivenThumbnail(a.$declarativeParent,q),k.postCountMetric("dpcc_imageThumbClicked_total"),
k.postCountMetric("dpcc_imageThumbClicked_"+(b.thumbnailIndex+1)+"_"+D)))}:B.update=function(a){var b=a.data;w.setCurrentEvent(a);"ingress"!==b.type&&X(a.data,!1);"swatchHover"===a.type?b.color===w.getCurrentItem().color?e(w.getCurrentItem(),null,b.color,!0):a.captured||-1===t(b)||(a.captured=!0):"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,"mouseenter"===a.type&&k.postCountMetric("dpcc_imageThumbHovered_"+(b.thumbnailIndex+1)+"_"+D),e(b,null,b.color,!0),d.usePeekHover&&"click"!==
a.type||(f.selectGivenThumbnail(a.$declarativeParent,q),"click"===a.type&&(k.postCountMetric("dpcc_imageThumbClicked_total"),k.postCountMetric("dpcc_imageThumbClicked_"+(b.thumbnailIndex+1)+"_"+D))))};d.overrideAltImageClickAction&&f.addTag("clickEnabledOnAltImages");y.register("imageHover",C);y.register("resize",h)}});"use strict";M.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockShoppableSceneView",function(n,c,f,u){function k(f,l){f=c("\x3cimg src\x3d'"+(l?r.staticImages.shoppableSceneDotHighlighted:
r.staticImages.shoppableSceneDot)+"' alt\x3d''\x3e");f.css({display:l?"none":"inline-block"});f.addClass("mirai-scene-tag").addClass(l?"active-tag":"inactive-tag");return f}function J(f){var l=c("\x3cspan\x3e");n.each(f.tags,function(f){var e=c("\x3cdiv\x3e").css({position:"absolute",left:100*f.left+"%",top:100*f.top+"%",height:"auto",width:"auto"});e.append(k(f,!1));e.append(k(f,!0));e.bind("mouseenter",function(){F(c(this).find(".mirai-scene-tag[style*\x3d'display: inline-block']"))});n.declarative.create(e,
"scenes-show-details-tags-ib",{tagId:f.link});l.append(e)});return l.children()}function F(c){c.addClass("mirai-scene-dot-pulsate");n.delay(function(){c.removeClass("mirai-scene-dot-pulsate")},4E3)}function K(c,f){c.css({display:"none"});f.css({display:"inline-block"})}function L(c,f,e){c.eq(e).css({display:"inline-block"});f.eq(e).css({display:"none"})}function z(c){M.when("mirai-multi-scene-view").execute("mirai-scene-protected-image-selection",function(){n.trigger("mirai:scene-details-change",
{physicalId:c})})}function I(){var f=c("\x3cspan class\x3d'mirai-scene-view-products-button-content'\x3e"),l=c("\x3cimg class\x3d'item-tag'\x3e").attr("src",r.staticImages.shoppableSceneViewProductsButton).addClass("item-tag"),e=c("\x3cspan class\x3d'mirai-scene-view-products-button-text'\x3e");e.html(r.staticStrings.shoppableSceneViewProductsButton);return f.append(l).append(e)[0].outerHTML}function E(c){function f(){c.$tagPlaceholder.replaceWith(k);var d=k.find(".mirai-scene-tag.active-tag"),f=
k.find(".mirai-scene-tag.inactive-tag");L(d,f,0);F(k.find(".mirai-scene-tag[style*\x3d'display: inline-block']"));H=!0;c.$viewProductsButton.removeClass("aok-hidden");"function"==typeof uex&&uex("ld","desktop-dp-atf-ib-shoppablescenes-tags-"+c.index,{wb:1});B=!0;u.postCountMetric("miraiShoppableScenes_imageLoadedCount")}if(c.shoppableScene){var e=c.$viewProductsButton.find(".a-button-text");if(0===e.children().length){e.append(I());n.declarative.create(c.$viewProductsButton,"scenes-show-details-view-products-ib",
{tagId:c.shoppableScene.tags[0].link});var k=J(c.shoppableScene),z=k.find(".mirai-scene-tag.active-tag"),h=k.find(".mirai-scene-tag.inactive-tag"),A=c.shoppableScene.physicalId,B=!1;n.on("mirai:index:change",function(c){c.scenePhysicalId===A&&(c=c.selectedIndices[0],K(z,h),L(z,h,c),F(k.find(".mirai-scene-tag[style*\x3d'display: inline-block']").eq(c)),H=!0)});n.on("mirai:scene-details-change",function(c){c.physicalId!==A||H||(K(z,h),L(z,h,0),F(k.find(".mirai-scene-tag[style*\x3d'display: inline-block']")),
H=!0)});n.on("mirai:no-products-active",function(c){c.scenePhysicalId===A&&K(z,h)});n.on("mirai:set-first-product-active",function(c){c.scenePhysicalId===A&&(K(z,h),L(z,h,0))});n.on("a:image:load:shoppable-scene:"+c.index,function(){B||(f(),u.postCountMetric("miraiShoppableScenes_imageLoadedViaAuiListenerCount"))});n.on("shoppable-scene-image-loaded",function(d){d.index!=c.index||B||(f(),u.postCountMetric("miraiShoppableScenes_imageLoadedViaMiraiListenerCount"))});M.when("mirai-multi-scene-view").execute("mirai-scene-protected-side-sheet-initialization",
function(){n.trigger("mirai:scene-side-sheet-init",{icons:r.staticImages,strings:r.staticStrings});n.trigger("mirai:scene-details-init",{scene:c.shoppableScene,imageSource:c.imageSource})})}}}var G,r,A,H=!1;return function(c,k,e,n){G=this;r=c;A=n;f.isShoppableScenesEnabled()?(A.register("initialize-shoppable-scene",E),G.render=function(c,f,e,k,d,l,y){},G.update=function(c){"mouseenter"===c.type&&(c.data.shoppableScene?z(c.data.shoppableScene.physicalId):H=!1)}):(c=function(){},G.render=c,G.update=
c)}});M.now().register("ShoppableSceneWeblabProvider",function(){return{isEnabled:!0}});"use strict";var P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};M.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric","ShoppableSceneWeblabProvider").register("imageBlockUtils",function(n,
c,f,J,k,N,F,K,L){function z(a){return null!==a&&"undefined"!==typeof a}function I(a){var b=0;c.each(a,function(a,c){a=parseInt(c[1],10);a>b&&(b=a)});return b}function E(a){var b=0;c.each(a,function(a,c){a=parseInt(c[0],10);a>b&&(b=a)});return b}function G(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;a=I(a);0<a&&(b=Math.min(b,a));return b}function r(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=E(a);0<a&&(b=Math.min(b,a));return b}function A(a){var b;c.each(a,function(a,c){z(b)||
(b=c[1]/c[0])});return b||1}function H(a){if(a){if(0<a.indexOf(".m3u8"))return"application/x-mpegURL";if(0<a.indexOf(".mp4"))return"video/mp4"}return""}function O(a,b,d,h,m,k,p,n,q,t,x,r,u,z,w){var g=c.extend({},d.foresterMetadataParams);null!==h&&(g.method+="."+h);var v=[];b.disabledViewIds&&(v=b.disabledViewIds);w=w&&w.videoBackgroundChromefulMainView?w.videoBackgroundChromefulMainView:"black";"unrolled-video-add"===z&&(w="transparent");return f.embed({parentElement:a[0],streamingUrls:b.url,contentId:b.mediaObjectId,
contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,swfUrl:d.swfUrl,foresterMetadataParams:g,backgroundColor:w,flashParams:{wmode:"transparent"},slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl},videoAds:d.videoAds,bindings:{play:function(){if("ImmersiveView"===h)y||(y=!0,J.postCountMetric("dppc_chromefulVideoPlayedIV"));else if(Q||(Q=!0,J.postCountMetric("dppc_chromefulVideoPlayedPV")),!t){var a=J.buildNexusMetric("ib.thumbnailClick",q,b.mediaObjectId,b.rankingStrategy,b.groupType,
x,r,u);J.emitNexusMetric(a)}}},cuePoints:[{values:b.durationSeconds-1,type:"position",callback:function(a,b,c){m&&(l(0,k,n),e(p))}}],disabledViewIds:v})}function l(a,b,c){b.fadeTo(500,0,function(){t(a,c);b.fadeTo(500,1)})}function e(a){a&&a.toggle()}function t(a,b){b=b.find("img");z(b[a])&&c(b[a]).click()}function M(a,c){b[a]=c?c:b[a];return b[a]}function h(a,b,d){d=d||q;d=d.colorImages;if(1>d.length||!z(d[a])||!z(b))return-1;var g=-1;c.each(d[a],function(a,c){c.variant===b&&(g=a)});return g}function C(a,
b,d){d=d||q;d=d.colorImages;return!(z(d)&&z(d[a])&&z(d[a][b])&&z(d[a][b].main))||1>c.map(d[a][b].main,function(a,b){return b}).length?-1:d[a][b]}function B(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function d(a,b){var g;if(g=a.useIV)g=a.colorImages&&a.colorImages[b]&&0<a.colorImages[b].length?!0:!1;a=g;F.isEnabled&&(F.IVApplicaple=a,K.logImmersiveViewApplicability(c,F));return a}function w(){return 0<c(".gridImageBlockViewLayoutIn2x4").length||
0<c(".gridImageBlockViewLayoutIn2x5").length||0<c(".gridImageBlockViewLayoutIn1x7").length}var y,Q,U,q=c.extend(!0,{},k,N),b={},x=0,p=0,D=/gridAltImageViewLayoutIn(\d+)x(\d+)/g;return{isDefined:z,isDefinedAndEmpty:function(a){return z(a)&&"object"===("undefined"===typeof a?"undefined":P(a))&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return z(a)?"object"===("undefined"===typeof a?"undefined":P(a))&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return z(a)?"object"===
("undefined"===typeof a?"undefined":P(a))&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:A,getMaxHeightOfMainImage:r,getMaxWidthOfMainImage:G,getMaxDimensionsOfMainImage:function(a,b,c){if(c.acEnabled)return[b.height(),b.width()];var g=r(a,b,c);b=G(a,b,c);a=A(a);c=b/a;b=Math.min(b,g*a);g=Math.min(g,c);return[g,b]},getContainerHeight:function(a,b,c){var d=a.get(0);a=0;if(z(d)){a=Math.min(d.offsetWidth/b,c);var g;b=q.mainImageHeightPartitions;c=q.mainImageMaxSizes;
if(z(c)&&z(b)){var f=0,e=u.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;for(d=0;d<b.length;d++)e>b[d]&&(f=d+1);c.length>=f&&(g=c[f])}z(g)&&(a=Math.min(g[1],a))}return a},getColorFromState:function(a,b){if(a){b=b||q;var d="";c.each(b.visualDimensions,function(b,c){a[c]&&(d+=" "+a[c])});return d&&d.substring(1)}},createThumbnail:function(a,b,c,d){var g=c.find(".template").clone().removeClass("template").addClass("item"),f=document.createElement("img");f.src=b;g.find(".placeHolder").replaceWith(f);
(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&g.addClass("heroImageThumbnail");z(d)&&g.addClass(d);w()&&g&&(d=document.createElement("div"),d.className="imageBlockThumbnailImageGrayOverlay",f.parentNode.insertBefore(d,f));n.declarative.create(g,"thumb-action",a);g.attr&&(g.attr("data-ux-click",""),a.type&&a.type.match(/video/)?(g.attr("data-csa-c-type","uxElement"),g.attr("data-csa-c-element-type","navigational"),g.attr("data-csa-c-action","image-block-alt-image-clickToImmersiveVideos")):
(g.attr("data-csa-c-type","uxElement"),g.attr("data-csa-c-element-type","navigational"),g.attr("data-csa-c-action","image-block-alt-image-hover")),g.attr("data-csa-c-posy",a.thumbnailIndex+1));c.append(g);return g},updateImageThumbnailOverlay:function(a,b,c){a.find(".textMoreImages").append(c.length-b.thumbnailIndex+"+")},selectGivenThumbnail:function(a,b){a=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");a.addClass("a-button-selected").addClass("a-button-focus")},
createAiryInstanceForChromeful:function(a,b,c,d,f,e,h,k){O(a,b,c,d,f,e,h,k,0,1,"","","")},createAiryInstanceForChromefulNotUseTabbedImmersiveView:O,loadMediaIntoAiry:function(a,b,c,d){a&&a.getMediaSourceInfo()!==b.url&&(d?a.loadMedia?(U={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},a.loadMedia(U)):a.play({videoUrl:b.url,imageUrl:b.slateUrl,mimeType:"video/mp4",contentId:b.mediaObjectId,rankingStrategy:b.rankingStrategy,refTag:"vse_ib_tablet_web"}):a.loadMedia?a.loadMedia({mediaSourceInfo:b.url,
contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}):a.setInitialData({videoUrl:b.url,mimeType:H(b.url),contentId:b.mediaObjectId,rankingStrategy:b.rankingStrategy,imageUrl:b.slateUrl,aciContentId:b.aciContentId}))},showUnavailable:function(a){a&&(c("#imageBlock .unvailableVariation").html(a),c("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){c("#imageBlock .variationUnavailable").hide()},
fadeToThumbnail:l,toggleVideoCaption:e,selectThumbnail:t,spinner:function(a,b){var d=c("#imageBlock .a-spinner").parent();0===d.length&&(d=c("\x3cdiv\x3e\x3c/div\x3e").append(c("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),a.append(d),d.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px",
"-moz-border-radius":"20px","border-radius":"100%"}));b?d.show():d.hide();return d},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:M,getIndexForVariant:h,getImageHash:C,lazyLoadingRequired:function(a,b,c){b=Math.max(h(a.color,b.getCurrentItem().variant,c),0);b=-1!==C(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==M(a);return!c.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},
updateAspectRatio:B,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();B(c,16,9,b)},d||0)},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!z(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return z(a)&&z(a[b])&&z(a[b].url)?a[b]:-1},isImmersiveViewEnabled:d,playVideoInImmersiveView:function(a,b){return d(a,b)&&a.useTabbedImmersiveView},
useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},getMediaSourceInfo:function(){return z(U)?U.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,b,c){return{requester:"DetailPageTablet",marketplaceID:c.marketPlaceID,clientPrefix:"ImageBlock_tablet",locale:c.languageCode,page:"DetailPageTablet",placement:"ImageBlock",metadata:{shouldPreload:!1},video:{videoURL:c.url,imageURL:c.slateUrl}}},addTag:function(a){u.ue&&u.ue.tag&&u.ue.tag(a)},isShoppableScenesEnabled:function(){return L.isEnabled&&
0<c(".mirai-scene-image-block-template").length},isImageBlockGridViewDisplayEnabled:w,isImageBlockGridViewHoverDelayEnabled:function(){return 0<c(".gridImageBlockViewLayoutIn2x4").length||0<c(".gridImageBlockViewLayoutIn2x5").length},getHoveringDelayTimer:function(){return x},updateThumbnailHoverDelay:function(a){if(z(a)){x=0;var b=a.closest("li");b=b.parent().children("li").filter(":not(.aok-hidden, .template, .pos-360)").index(b);if(-1!==b){var c=p;a=a.closest("ul").attr("class");a===Z?c=!1:(a=
D.exec(a),null===a||3!==a.length?c=!1:(a=a[2],c=Math.floor(c/a)>Math.floor(b/a)));c&&(x=100);p=b}}},logError:function(a,b,c,d){u.ueLogError&&u.ueLogError(d,{logLevel:a,attribution:b,message:c})}}});"use strict";M.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(n,c,f,J,k,N){function F(a,d,g,e){!b.autoplayVideo||ma||b.useChromelessVideoPlayer?!f.isjQueryObjDefined(a.find(".a-button-selected"))&&(g=x.getCurrentItem(),!e||
b.prioritizeVideos||"chromeless-video"===g.type&&b.autoplayVideo)&&(e=f.getVideoHash(g.color,0,b),-1===e||g.thumbnailIndex>=b.maxAlts-1||(d+=0,p.dispatch("updateModel",{data:{index:0,thumbnailIndex:d,variant:e.variant,type:b.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),d=a.find(".item").get(d),f.selectGivenThumbnail(c(d),a))):(f.selectGivenThumbnail(a.find("img:last"),a),f.fadeToThumbnail(a.find("img").length-1,v,a))}function K(a){var c=x.getCurrentItem().color;if(b.useChildVideos&&
!b.colorToVideo[c]){var d=function(){if(a){b.colorToVideo[c]=a;var d={type:"updatedData",data:x.getCurrentItem()};p.dispatch("updateView",d)}};b.lazyLoadExperienceDisabled?d():M.when(f.rankedImagesReadyEvent(b.colorToAsin[c].asin)).execute(function(){d()})}}function L(a){a&&(b.notShowVideoCount=a,a={type:"updatedData",data:x.getCurrentItem()},p.dispatch("updateView",a))}function z(a){if(!b.useChildVideos)return f.lazyLoadingRequired(x.getCurrentItem(),x,b)?void 0:b.videos;if(b.colorToVideo[a])return b.colorToVideo[a];
var c=b.colorToAsin[a];if(c&&c.asin){var d={};d.params={asin:c.asin,productGroupID:b.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:b.useChromelessVideoPlayer,isUDP:b.isUDP};b.isDPXFeatureEnabled||(d.success=function(a){K(a)},J.load("/gp/product/features/apparel-main-image/videos.html",d));return b.colorToVideo&&b.colorToVideo[a]}}function I(c){m&&null===c&&2!==b.unrolledImageBlockTreatment&&3!==b.unrolledImageBlockTreatment&&(m.hide(),a.parent().css("z-index",-1),g&&g.hide())}function E(c,
d,g){d=v.width()/v.height();var e=parseInt(c.videoWidth,10),h=parseInt(c.videoHeight,10);f.updateAspectRatio(d,e,h,a);if(m&&"unrolled-video-add"!==g)m.show(),f.loadMediaIntoAiry(m,c,aa,b.tabletWeb);else if(b.tabletWeb)m=R;else{if("unrolled-video-add"===g){m=R;return}if(null===R||R===Z)Y=setInterval(function(){m=R;m!==Z&&null!==m&&(m.show(),f.loadMediaIntoAiry(m,c,aa,b.tabletWeb),G(),l(m),clearInterval(Y),Y=null)},500);else if(m=R,m!==Z&&null!==m){m.show();f.loadMediaIntoAiry(m,c,aa,b.tabletWeb);G();
l(m);return}}G();l(m)}function G(){if(2!==b.unrolledImageBlockTreatment&&3!==b.unrolledImageBlockTreatment)if(f.useTabbedImmersiveView(b)){if(1<f.getVideosCount(x.getCurrentItem().color,b)&&g){if(f.isDefined(W)){g.show();return}W=c('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(b.staticStrings.watchMoreVideos);g.find("#videoCaption").append(W);n.declarative.create(W,"videoIngressClick",T)}f.playVideoInImmersiveView(b,x.getCurrentItem().color)&&(n.declarative.create(a,"videoIngressClick",
T),a.attr&&a.attr("data-ux-click",""),a.children().css("z-index","-1"),a.css("display","inline-block"))}else g&&(g.find("#videoCaption").text(b.staticStrings.playVideo),g.show())}function r(a,c){if("chromeful-video"===a.type||"chromeless-video"===a.type||"unrolled-video-add"===c){var d=f.getVideoHash(a.color,a.index,b);if(-1===d)return-1;"chromeful-video"===a.type&&E(d,a.thumbnailIndex+1,c)}}function A(a,d,g){if((2===b.unrolledImageBlockTreatment||3===b.unrolledImageBlockTreatment)&&g)return a;var e=
z(d);d=a;var h=c(".unrolledImg"),l=f.isDefined(e)&&0<e.length&&b.alwaysIncludeVideo?1:0;f.isDefined(e)&&0<e.length&&!b.alwaysIncludeVideo&&a===b.maxAlts&&k.postCountMetric("IBVideoDrop");h.length>b.maxAlts&&h.each(function(a){a>=b.maxAlts&&c(this).remove()});l&&a===b.maxAlts&&(2===b.unrolledImageBlockTreatment||3==b.unrolledImageBlockTreatment?(c(".thumbItemUnrolled").last().remove(),c(".unrolledImg").last().remove()):D.find(".item:last").remove(),a--);f.isDefined(e)&&(c.each(e,function(d,g){if(a<
b.maxAlts){if(2===b.unrolledImageBlockTreatment||3===b.unrolledImageBlockTreatment){var h=b.useChromelessVideoPlayer?"chromeless-video":"chromeful-video";c('\x3cli class\x3d"thumbItemUnrolled thumbType'+h+" thumbIndex"+d+'"\x3e\x3cspan class\x3d"a-list-item"\x3e \x3cspan class\x3d"a-button a-button-thumbnail a-button-toggle" id\x3d"a-autoid-'+a+'"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input" type\x3d"submit" aria-labelledby\x3d"a-autoid-'+a+'-announce"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true" id\x3d"a-autoid-'+
a+'-announce"\x3e \x3cimg alt\x3d"" src\x3d"'+g.thumb+'"\x3e \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e \x3c/span\x3e\x3c/li\x3e').appendTo(c("ul.regularAltImageViewLayout"));c('\x3cli data-csa-c-action\x3d"image-block-main-image-hover" data-csa-c-element-type\x3d"navigational" data-csa-c-posy\x3d"'+a+'" data-csa-c-type\x3d"uxElement" class\x3d"image item itemNo'+a+' unrolledImg videoMedia"\x3e\x3cspan class\x3d"a-list-item"\x3e \x3cspan class\x3d"a-declarative" data-action\x3d"main-image-click" data-csa-c-type\x3d"widget" data-csa-c-func-deps\x3d"aui-da-main-image-click" data-main-image-click\x3d"{}" data-ux-click\x3d"" \x3e \x3cdiv id\x3d"imgTagWrapperId" class\x3d"imgTagWrapper"\x3e\x3cdiv id\x3d"unrolledImgNo'+
a+'" class\x3d"videoIndex'+d+'"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/span\x3e\x3c/span\x3e\x3c/li\x3e').appendTo(c(".unrolledScrollBox .list-unrolled"));b.dp60InLastPositionUnrolledImageBlock||2!==b.dp60VideoPosition||H(c(".regularAltImageViewLayout"),b.dp60VideoPosition)}else{h=b.useChromelessVideoPlayer?"chromeless-video":"chromeful-video";var l={type:h,index:d,thumbnailIndex:a,variant:g.variant};T={type:"video-ingress",index:d,thumbnailIndex:a,variant:g.variant};f.useTabbedImmersiveView(b)&&("chromeful-video"===
h&&(ka+=" videoBlockIngress  videoBlockDarkIngress",g.thumb=g.thumb.replace("_PKmb-play-button-overlay-thumb","")),b.altsOnLeft||(ka+=" a-align-top"));f.isImageBlockGridViewDisplayEnabled()&&(ka+=" videoImageBlockGridView");f.createThumbnail(l,g.thumb,D,ka);2===b.dp60VideoPosition&&H(D,b.dp60VideoPosition);f.useTabbedImmersiveView(b)&&(O(D.find(".videoBlockIngress img"),b.videoIngressATFSlateThumbURL),d=1<e.length?"multiple-videos":"one-video",(l=!0===b.notShowVideoCount?b.staticStrings.multipleVideos:
1<e.length?e.length+" "+b.staticStrings.multipleVideos:b.staticStrings.singleVideo)&&D.find(".videoBlockIngress").append(D.find("#videoCount_template").clone().text(l).attr("id","videoCount")).addClass(d));g=k.buildNexusMetric("ib.thumbnailRender",a+1,g.mediaObjectId,g.rankingStrategy,g.groupType,ca,S,P,da);k.emitNexusMetric(g);ja||(ja=!0,k.postCountMetric("chromeless-video"===h?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"))}a++}if(f.useTabbedImmersiveView(b))return!1}),F(D,d,a,
g),B(w),b.imageBlockRenderingStartTime&&k.postTimeMetric("vse_desktop_ib_video_ingress_enable_duration",n.now()-b.imageBlockRenderingStartTime));return a}function H(a,d){if(0!==d)if(2===b.unrolledImageBlockTreatment||3===b.unrolledImageBlockTreatment){var f=b.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",g=a.children(".thumbTypeimage");a=a.children(".thumbType"+f);g&&a&&g[d-1]&&c(g[d-1]).before(a[0]);a=c(".unrolledScrollBox .list-unrolled");g=a.children(".unrolledImg.imgMedia");a=
a.children(".unrolledImg.videoMedia");g&&a&&g[d-1]&&c(g[d-1]).before(a[0]);c(".unrolledScrollBox .list-unrolled").children(".unrolledImg").each(function(a){for(var b=null,d=0;d<this.classList.length;d++)this.classList[d].includes("itemNo")&&(b=d);null!==b&&c(this).removeClass(this.classList[b]).addClass("itemNo"+a);this.querySelectorAll("div")[1].id="unrolledImgNo"+a})}else g=a.children(".imageThumbnail"),a=a.children(".videoBlockIngress"),g&&a&&g[d-1]&&c(g[d-1]).before(a[0])}function O(a,b){var c=
a.attr("src");c&&b&&(a.attr("src",b),b=new Image,b.onload=function(b){a.attr("src",c)},b.src=c)}function l(a){b.autoplayVideo&&a&&!ma&&(g&&f.toggleVideoCaption(g),a.setVolume(0),a.show(),a.play(),ma=!0)}function e(a){m&&m.pause();a.data=T;a.clickTimeStamp=a.$event.timeStamp;var d="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";p.dispatch("imageClick",a);k.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);a=k.buildNexusMetric("ib.thumbnailClick",a.data.thumbnailIndex+
1,b.videos[0].mediaObjectId,b.videos[0].rankingStrategy,b.videos[0].groupType,ca,S,P,da);k.emitNexusMetric(a);k.postCountMetric(d);c("#main-video-container .vjs-control-bar").css("display","none");c("#main-video-container .vjs-poster").css("display","inline-block")}function t(a){null!==m&&m!==Z&&(m.frame&&m.frame.remove(),m=null,R.frame&&R.frame.remove(),R=null);R=a.player;c("#main-video-container .vse-airy-container.vse-player-container").css("min-width","auto");R.hide=function(){R.pause();n.$("#main-video-container").find(".vse-player-container").hide()};
R.show=function(){n.$("#main-video-container").find(".vse-player-container").show()};R.getMediaSourceInfo=function(){return f.getMediaSourceInfo()}}function X(d,h,k,l,y,p){I(p);a=null!==p?c("#unrolledImgNo"+p.thumbnailIndex):l.find("#main-video-container");sa&&(g=null!==p?"":a.parent().find("#video-canvas-caption"));v=null!==p?c(".unrolledScrollBox"):c("#main-image-container");null===p&&f.isImageBlockGridViewDisplayEnabled()&&(a.addClass("videoCenter"),l.find("#video-outer-container").addClass("videoWrapperCenter"));
ca=u.location.href;d=x.getCurrentItem().color;!0===y?S=b.mediaAsin:(S=b.colorToAsin[d]&&b.colorToAsin[d].asin,S=f.isDefined(S)?S:b.mediaAsin);b.useChromelessVideoPlayer||a.addClass("chromeful-container");null!==p?r(p,"unrolled-video-add"):r(x.getCurrentItem(),"");f.useTabbedImmersiveView(b)&&n.declarative("videoIngressClick",["click"],e);if(-1!==m&&null!==p){d=x.getCurrentItem().color;var m=f.getVideoHash(d,p.index,b);y={requester:"MediaBlockSoftlines",marketplaceID:m.marketPlaceID,clientPrefix:"mbSoftlines"+
p.thumbnailIndex,locale:m.languageCode,page:"Detail",metadata:{placementcontext:"mb_sl",alwaysSetInitialVideo:!1},placement:"ImageBlock",video:{videoURL:m.url,imageURL:m.slateUrl},product:{contentID:U(b,d),contentIDType:"ASIN"}};N.get(n,"#unrolledImgNo"+p.thumbnailIndex,y,function(){n.$("#unrolledImgNo"+p.thumbnailIndex).find(".vse-player-container").show()},function(){n.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()})}}function h(a,b){function c(a){a=Math.floor((D.width()-1)/e);
a=d?a-1:a;b.slice(a).hide();b.slice(0,a).show();b.removeClass("overlayRestOfImages");a<b.length&&b.eq(a-1).addClass("overlayRestOfImages")}var d=0!=D.find(".item.videoThumbnail").length,g=b.eq(0).width(),f=b.eq(1).position().left-b.eq(0).position().left-g,e=g+f;c();a.register("resize",c)}function C(a){var b=D.find(".item.imageThumbnail");if(!(1>=b.length)){var c=b.eq(0).find("img").get(0);c!==Z&&c.decode().then(function(){h(a,b)})}}function B(a){try{if(!a)return!1;na=a;ea=document.querySelectorAll("#imageBlock #altImages ul li.videoThumbnail");
a={root:null,rootMargin:"0%",threshold:.75};null!==la&&la.disconnect();0<ea.length&&(la=new IntersectionObserver(d,a));ea.forEach(function(a){la.observe(a)})}catch(ua){k.postCountMetric("ib_dsktp_thumb_impr_intersection_obs_failed")}}function d(a){na(a,ra,qa,ea,pa)}function w(a,b,d,g,f){try{c.each(a,function(a,e){var h=c(g).index(e.target);e.isIntersecting?fa[h]||(fa[h]=setTimeout(function(){b=b.slice();b.push(h);d=b.sort(function(a,b){return a-b});var a=y(d,f);if(0!==a.length&&0!==d.length){var c=
x.getCurrentItem().color;c=z(c);Q(c,a);delete fa[h]}},1E3)):(clearTimeout(fa[h]),delete fa[h],b=b.filter(function(a){return a!==h}),d=b.sort(function(a,b){return a-b}))})}catch(wa){k.postCountMetric("ib_dsktp_thumbnail_on_intersection_failed")}}function y(a,b){return b=a=a.slice().filter(function(a){return 0>b.indexOf(a)})}function Q(a,b){try{if(!a||!b||0===a.length||0===b.length)return!1;c.each(b,function(b,c){if(c=1===ea.length?a[0]:a[c])b=k.buildNexusMetric("ib.thumbnailImpression",b+1,c.mediaObjectId,
c.rankingStrategy,c.groupType,u.location.href,S,P,da),k.emitNexusMetric(b)})}catch(va){k.postCountMetric("ib_dsktp_thumbnail_impression_failed")}}function U(a,b){if(a){if(a.colorToAsin&&a.colorToAsin[b]&&a.colorToAsin[b].asin)return a.colorToAsin[b].asin;if(a.mediaAsin)return a.mediaAsin}return""}var q,b,x,p,D,a,g,v,W,m,aa,T,ba,R,S,ca,P,da,ha,V,ia,ja=!1,ma=!1,ka="videoThumbnail",Y=null,la=null,qa,pa=[],ea,ra=[],na=null,oa=n.state("imageBlockStateData"),sa=oa?!oa.shouldRemoveCaption:!0,fa={};return function(d,
e,h,l){q=this;b=d;x=e;p=l;aa=b.airyConfig;P=b.contentWeblab&&b.contentWeblab+":"+b.contentWeblabTreatment;b.colorToVideo={};b.colorToVideo[b.landingAsinColor]=b.colorToVideo[b.defaultColor]=b.videos;b.tabletWeb?(ha="tablet",da="applicationType.ImageBlock.vse_ib_tablet_web"):n.capabilities.tablet?(ha="tablet",n.capabilities.isAmazonApp&&(da="applicationType.ImageBlock.vse_ib_tablet_app")):(ha="desktop",da="desktop_web.ImageBlock.vse_ib_iv");q.render=function(d,e,h,k,l,y){null!==Y&&(clearInterval(Y),
Y=null,a&&a.parent&&a.parent().css("z-index",-1),g&&g.hide&&g.hide());var m=[];if(2===b.unrolledImageBlockTreatment||3===b.unrolledImageBlockTreatment){D=c("ul.regularAltImageViewLayout");ba=A(e,d,y);m=[];e=c(".thumbItemUnrolled").filter(function(){return this.classList.contains("thumbTypechromeful-video")||this.classList.contains("thumbTypechromeless-video")});for(var q=0;q<e.length;q++){var t=e[q].classList.contains("thumbTypechromeful-video")?"chromeful-video":"chromeless-video",v=Number(e[q].classList[2].slice(10)),
r=c(".thumbItemUnrolled").index(e[q]);m.push({color:d,thumbnailIndex:r,type:t,varient:"MAIN",index:v})}for(q=0;q<m.length;q++)X(d,h,k,l,y,m[q])}else D=k,ba=A(e,d,y),X(d,h,k,l,y,null),d=x.getCurrentItem().color,h=f.getVideoHash(d,0,b),-1!==h&&(d=b.tabletWeb?f.getNilgiriServiceAjaxRequest(b,d,h):{requester:"MediaBlockSoftlines",marketplaceID:h.marketPlaceID,clientPrefix:"mbSoftlines",locale:h.languageCode,page:"Detail",metadata:{placementcontext:"mb_sl",alwaysSetInitialVideo:!1},placement:"ImageBlock",
video:{videoURL:h.url,imageURL:h.slateUrl},product:{contentID:U(b,d),contentIDType:"ASIN"}},N.get(n,"#main-video-container",d,function(){n.$("#main-video-container").find(".vse-player-container").hide()},function(){n.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));b.collapsibleThumbnails&&C(p);return ba};q.setupIntersectionObserverToWatchVideoThumbnail=B;q.emitMultipleImpressionMetric=Q;f.isImageBlockGridViewHoverDelayEnabled()?q.update=function(c){null!==Y&&(clearInterval(Y),Y=
null,a&&a.parent&&a.parent().css("z-index",-1),g&&g.hide&&g.hide());var d=c.data;"ingress"===d.type||"swatchHover"===c.type||f.lazyLoadingRequired(d,x,b)||(x.setToPreviousItem(),"mouseenter"===c.type?(ia&&clearTimeout(ia),ia=setTimeout(function(){x.setToCurrentItem(d);I(null)},f.getHoveringDelayTimer())):"mouseleave"===c.type?ia&&clearTimeout(ia):"click"===c.type&&(x.setToCurrentItem(d),I(null)));if("swatchHover"===c.type)"ingress"===d.type||f.lazyLoadingRequired(d,x,b)||I(null),d.color===x.getCurrentItem().color?
r(x.getCurrentItem(),""):c.captured||f.lazyLoadingRequired(d,x,b)&&!f.lazyLoadOnHoverEnabled(b)&&r(x.getCurrentItem(),"");else if("chromeful-video"===d.type){var e=f.getVideoHash(d.color,d.index,b);"mouseenter"===c.type?(k.postCountMetric("dpcc_videoThumbHovered_"+(d.thumbnailIndex+1)+"_"+ba),e=k.buildNexusMetric("ib.thumbnailHover",d.thumbnailIndex+1,e.mediaObjectId,e.rankingStrategy,e.groupType,ca,S,P,da),k.emitNexusMetric(e),V&&clearTimeout(V),V=setTimeout(function(){r(d,"");!b.usePeekHover&&n.$(c.$currentTarget).closest("li").hasClass("videoThumbnail")&&
f.selectGivenThumbnail(c.$declarativeParent,D)},f.getHoveringDelayTimer())):"mouseleave"===c.type?V&&clearTimeout(V):"click"===c.type&&(r(d,""),n.$(c.$currentTarget).closest("li").hasClass("videoThumbnail")&&(f.selectGivenThumbnail(c.$declarativeParent,D),e=k.buildNexusMetric("ib.thumbnailClick",d.thumbnailIndex+1,e.mediaObjectId,e.rankingStrategy,e.groupType,ca,S,P,da),(!f.useTabbedImmersiveView(b)&&"chromeless-video"===d.type||"tablet"==ha)&&k.emitNexusMetric(e),f.useTabbedImmersiveView(b)&&(k.emitNexusMetric(e),
k.postCountMetric("dpcc_videoThumbClicked_"+(d.thumbnailIndex+1)+"_"+ba),T.action="videoIngressClick",T.clickTimeStamp=c.$event.timeStamp,T.$event=c.$event,T.$currentTarget=c.$currentTarget,p.dispatch("videoIngressClick",T),k.postTimeMetric("dpcc_vse_videoingressclick",c.$event.timeStamp))))}}:q.update=function(c){null!==Y&&(clearInterval(Y),Y=null,a&&a.parent&&a.parent().css("z-index",-1),g&&g.hide&&g.hide());var d=c.data;"ingress"===d.type||f.lazyLoadingRequired(d,x,b)||I(null);if("swatchHover"===
c.type)d.color===x.getCurrentItem().color?r(x.getCurrentItem(),""):c.captured||f.lazyLoadingRequired(d,x,b)&&!f.lazyLoadOnHoverEnabled(b)&&r(x.getCurrentItem(),"");else if("chromeful-video"===d.type){var e=f.getVideoHash(d.color,d.index,b);if("mouseenter"===c.type){k.postCountMetric("dpcc_videoThumbHovered_"+(d.thumbnailIndex+1)+"_"+ba);var h=k.buildNexusMetric("ib.thumbnailHover",d.thumbnailIndex+1,e.mediaObjectId,e.rankingStrategy,e.groupType,ca,S,P,da);k.emitNexusMetric(h)}r(d,"");b.usePeekHover&&
"click"!==c.type||!n.$(c.$currentTarget).closest("li").hasClass("videoThumbnail")||(f.selectGivenThumbnail(c.$declarativeParent,D),"click"===c.type&&(e=k.buildNexusMetric("ib.thumbnailClick",d.thumbnailIndex+1,e.mediaObjectId,e.rankingStrategy,e.groupType,ca,S,P,da),(!f.useTabbedImmersiveView(b)&&"chromeless-video"===d.type||"tablet"==ha)&&k.emitNexusMetric(e),f.useTabbedImmersiveView(b)&&(k.emitNexusMetric(e),k.postCountMetric("dpcc_videoThumbClicked_"+(d.thumbnailIndex+1)+"_"+ba),T.action="videoIngressClick",
T.clickTimeStamp=c.$event.timeStamp,T.$event=c.$event,T.$currentTarget=c.$currentTarget,p.dispatch("videoIngressClick",T),k.postTimeMetric("dpcc_vse_videoingressclick",c.$event.timeStamp))))}};b.isDPXFeatureEnabled&&(n.on("triggerVideoAjax",K),n.on("notShowVideoCountAjax",L));n.on("vsePlayer-imageblock_tablet",t);n.on("vsePlayer-mbsoftlines",t)}});"use strict";M.when("ImageBlockBTF","postMetric").register("ImageBlockInitViews",function(n,c){function f(c,f,N,F,K){function k(c){"click"===c.type&&F.postCountMetric("thumbClick");
"click"===c.type&&C.overrideAltImageClickAction?B.dispatch("thumbActionClick",c):B.dispatch("updateSelection",c)}function z(c){C.useClickZoom||B.dispatch("imageClick",c)}function I(c){C.useClickZoom||B.dispatch("imageHover",c)}function E(c){B.dispatch("button360Click",c)}function G(e){!N.isDefined(e)||"swatchClick"!==e.type&&"updatedData"!==e.type?(h.update(e),"swatchHover"!==e.type&&d.getPreviousItem().thumbnailIndex!==e.data.thumbnailIndex&&F.postCountMetric(e.data.type+"ThumbnailSelected"),c.trigger("image-block-thumbnail-selected",
e.data)):(h.render(e.data.color,!1,e.onload,e.type),e={hasComponents:!0,components:[{name:"mainimage"},{name:"thumbnail"}]},"function"===typeof u.markFeatureRender&&u.markFeatureRender("imageblock",e))}function r(c){B.dispatch("resize",c)}function A(c){N.selectThumbnail(c,w)}function H(){"function"===typeof u.markFeatureInteractive&&u.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["click"],alwaysInteractive:!0}]})}function J(){C.interactiveCallJSPEnabled||
("function"===typeof u.markFeatureInteractive&&u.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"],alwaysInteractive:!0},{name:"thumbnail",events:["click","hover"],alwaysInteractive:!0}]}),1===n.useIV?M.when("a-modal").execute(function(){H()}):H());C.disableHoverOnAltImages||c.declarative("thumb-action",["mouseenter","mouseleave"],k);c.declarative("thumb-action",["click"],k);c.declarative("main-image-click",["click"],z);c.declarative("main-image-click",
["mouseenter","mouseleave"],I);c.declarative("button-360-click",["click"],E);c.on("resize",r)}function l(c){var d=c.data,e;d&&"ingress"!==d.type&&"click"===c.type&&(e=c);return e}function e(c){var e=d.getCurrentItem(),f={type:"click"};f.$declarativeParent=c;f.data=e;return f}function t(){var c=w.find(".item.imageThumbnail");if(!(1>=c.length)){var e=d&&d.getCurrentItem()&&d.getCurrentItem().color;e=(e=C.colorImages&&e&&C.colorImages[e])&&e.length;c.removeClass("overlayRestOfImages");c.length<e&&(c.eq(c.length-
1).addClass("overlayRestOfImages"),c=document.createElement("div"),c.className="lastAltImageOverlay",(e=(e=(e=document.getElementsByClassName("overlayRestOfImages")[0])&&e.getElementsByTagName("img"))&&0<e.length&&e[0])&&e.parentNode&&(e.parentNode.insertBefore(c,e),F.postCountMetric("desktopCollapsibleThumbnailShow")))}}function P(c){N.isImageBlockGridViewHoverDelayEnabled()&&"mouseenter"===c.type&&N.updateThumbnailHoverDelay(c.$target)}var h,C,B,d,w;return function(c,k,n){h=this;C=c;B=k;d=n;w=f("#imageBlock #altImages ul");
var q=f("#imageBlock .canvas"),b=f("#main-image-container"),r;h.subViews=[];for(k=0;k<K.length;k++)h.subViews.push(new K[k](c,n,h,B));h.render=function(c,k,a,g){var l=0;w.find(".item").remove();c=c||d.getCurrentItem().color;f.each(h.subViews,function(d,e){l=(2===C.unrolledImageBlockTreatment||3===C.unrolledImageBlockTreatment?e.render(c,l,q,w,b,k,a,g):e.render(c,l,q,w,b,k,a))||l});C.desktopCollapsibleThumbnails&&t();var p=w.find(".a-button-selected").closest(".a-declarative");r=e(p)};h.init=function(){w=
f("#imageBlock #altImages ul");var b=w.find(".a-button-selected").closest(".a-declarative"),c=b.data("action");b=b.data(c)||{};b.color=C.landingAsinColor||C.defaultColor;B.dispatch("updateModel",{data:b});h.render(b.color,!0);C.isDebug&&u.console&&console.log(C);B.register("updateView",G);B.register("selectThumbnail",A);J()};h.update=function(b){P(b);f.each(h.subViews,function(c,a){a.update(b)});C.usePeekHover&&("mouseleave"===b.type?B.dispatch("updateSelection",r):"click"===b.type&&(r=l(b)||r))}}}
c=["A","jQuery","imageBlockUtils","postMetric"].concat(n.views);M.when.apply(M,c).register("ImageBlockView",function(){for(var c=arguments[0],k=arguments[1],n=arguments[2],u=arguments[3],K=[],L=4,z=arguments.length;L<z;L++)K.push(arguments[L]);return f(c,k,n,u,K)})})});
/* ******** */
(function(B){var C=window.AmazonUIPageJS||window.P,ea=C._namespace||C.attributeErrors,c=ea?ea("DetailPageImageBlockSubAssets@immersiveViews","DetailPageImageBlockSubAssets"):C;c.guardFatal?c.guardFatal(B)(c,window):c.execute(function(){B(c,window)})})(function(B,C,ea){B.when("A","jQuery").register("ImageBlockImmersiveViewDimensionIngress",function(c,b){var a;return function(b,c,E,u){a=this;a.render=function(){};a.update=function(){}}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric",
"imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(c,b,a,D,k){function E(){k.populateTitle(f.find("#ivTitle"),160,H)}function u(){var b=m.getCurrentItem().color;A=H.colorImages[b];F=H.heroImage[b];x=G=0;a.isDefined(F)&&(x=F.length);a.isDefined(A)&&(G=A.length)}function t(a){return a.hiRes||a.large||a.main[a.main.length-1]}function C(){var a=f.find("#ivStage").find("#ivLargeImage"),b=a.width(),h=a.height(),c=a.find(".fullscreen");c.removeAttr("style");var k=c.width(),
m=c.height();0<c.length&&(c[0].naturalWidth&&(k=c[0].naturalWidth),c[0].naturalHeight&&(m=c[0].naturalHeight));a.css("cursor","auto");k=0===k?1:k;m=0===m?1:m;var r=Math.min(b/k,h/m),x=m*r,q=k*r;1>r?(w?a.css("cursor","url('"+H.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),d=!0):d=!1;k=Math.min(q,k);m=Math.min(x-20,m);c.css({"margin-top":(h-m)/2,"margin-left":(b-k)/2,height:m,width:k});a.css("visibility","visible");p=!1}
function B(a){var b=f.find("#ivLargeImage");b.css("visibility","hidden");b.empty();k.animateStageIn(b);b.append(a);C()}function N(d){f.find("#ivLargeImage").css("display","none");f.find("#ivLargeImage").css("display","block");var h;"hero-image"===d?a.isDefined(F)&&(h=t(F[y.index])):a.isDefined(A)&&(h=t(A[y.index]));if(a.isDefined(h)){f.find(".fullscreen").remove();var m=b("\x3cimg\x3e").attr("src",h).addClass("fullscreen"),p=f.find("#ivLargeImage");k.animateStageOut(p,function(){m.load(function(){B(m);
c.trigger("dp:image-block:imageBlockImmersiveImageLoad",y.index)});if(m[0].complete)B(m),c.trigger("dp:image-block:imageBlockImmersiveImageLoad",y.index);else{p.empty();var a=(p.height()-104)/2,d=(p.width()-80)/2;b("\x3cimg\x3e").attr("src",H.staticImages.spinner).css({position:"relative",top:a+"px",left:d+"px"}).appendTo(p)}})}}function O(a){f.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?y.type="hero-image":y.type="image";y.index=a.attr("id").split("_")[1];
N(y.type);D.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(y.index,10)+1)+"_"+(x+G))}function P(){f.delegate(".ivThumb","click",function(){var a=b(this);O(a)})}function J(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function Q(a){var b=Y.top-(a.pageY-z[1])*q;a=J(Y.left-(a.pageX-z[0])*q,r.left);b=J(b,r.top);f.find(".fullscreen").css({left:a,top:b})}function ca(){f.delegate("#ivLargeImage","click",function(a){if(p)C();else if(d){f.find(".fullscreen").removeAttr("style");if(d){var b=f.find("#ivLargeImage"),
h=b.find(".fullscreen");w?b.css("cursor","url('"+H.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));p=!0;var c=f.find("#ivLargeImage");r.left=c.width()-h.width();r.top=c.height()-h.height();c=b.height()/2;var m=b.width()/2;z=[b.offset().left+m,b.offset().top+c];Y.top=c-h.height()/2;Y.left=m-h.width()/2;h.css({position:"relative",left:Y.left,top:Y.top});q=Math.max(h.height()/b.height(),h.width()/b.width())}Q(a);D.postCountMetric("dpcc_iv_largeImageCLick")}});
f.delegate("#ivLargeImage","mousemove",function(a){p&&Q(a)})}function V(){f.find("#ivLargeImage").empty()}function K(d){if(h){f=b("#ivMain");u();y=m.getCurrentItem();E();k.populateVariationSelection(f.find("#ivVariationSelection"));d=f.find("#ivThumbs");d.find(".ivRow").not(".placeholder").remove();for(var c=x+G,p=0,r=0;p<c;)for(var q=d.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(d),t=0;4>t&&p<c;t++,p++,r++)if(r<x){var w=F[p].thumb,z=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr({id:"ivHeroImage_"+
p,"data-csa-c-type":"item","data-csa-c-component":"imageBlock","data-csa-c-content-id":"image-block-immersive-view-hero-image","data-csa-c-posy":p+1}).appendTo(q);z.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(w)+'") center no-repeat')}else r>=x&&r<G+x&&(w=A[p-x].thumb,z=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr({id:"ivImage_"+(p-x),"data-csa-c-type":"item","data-csa-c-component":"imageBlock","data-csa-c-content-id":"image-block-immersive-view-alt-image",
"data-csa-c-posy":p-x+1}).appendTo(q),z.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(w)+'") center no-repeat'));L();h=!1}else E();d=b("#ivImagesTab").height();f.css("height",d);c=f.find("#ivTitle").outerHeight(!0);p=f.find("#ivVariationSelection").outerHeight(!0);r=f.find("#ivThumbs");q=k.getDimension(r,"margin-top")+k.getDimension(r,"margin-bottom");r.css("height",d-c-p-q);f.find("#ivLargeImage").css("height",d);d=f.find("#ivStage");c=f[0]&&f[0].getBoundingClientRect&&
Math.floor(f[0].getBoundingClientRect().width)||f.width();d.css("width",c-k.getDimension(f,"padding-left")-k.getDimension(f,"padding-right")-f.find("#ivThumbColumn").width()-k.getDimension(d,"margin-left")-k.getDimension(d,"margin-right"));y=m.getCurrentItem();d="hero-image"===y.type?f.find("#ivHeroImage_"+y.index):"image"===y.type?f.find("#ivImage_"+y.index):a.isDefined(F)?f.find("#ivHeroImage_"+y.index):f.find("#ivImage_"+y.index);a.isjQueryObjDefined(d)||(d=f.find("#ivImage_0"));O(d)}var T,H,m,
f,F,A,x,G,y,w=navigator.userAgent.match(/msie|trident/i),h=!0,p=!1,d=!1,r={},Y={},q,z;h=!0;var L=c.once(function(){P();ca();k.attachImmersiveViewResizeHandler(K);k.attachTabDeselectHandler("ivImagesTab",V)});return function(a,d,c,f){T=this;H=a;m=d;T.render=function(a,d,c,f,m,p){h=!0;u();0===x+G?k.hideTabHeading("ivImagesTabHeading"):k.unhideTabHeading("ivImagesTabHeading");1===x+G?b("#ivThumbs").hide():b("#ivThumbs").show()};T.update=function(a){};k.attachTabSelectHandler("ivImagesTab",K)}});"use strict";
B.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(c,b,a,D,k,E,u){function t(){var a=P.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),f=a.find(".a-popover-inner");a=a.height()-u.getDimension(f,"padding-top")-u.getDimension(f,"padding-bottom");b("#iv-tab-view-container").css("height",a);ca=b("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==
b(this).css("display")}).length;1<ca?(b("#iv-tab-view-container ul.iv-tab-views li").parent().show(),f=b("#iv-tab-view-container ul.iv-tab-views li").parent().height(),a-=f):b("#iv-tab-view-container ul.iv-tab-views li").parent().hide();b("#iv-tab-view-container .iv-tab-content").css("height",a);c.trigger("dp:image-block:immersive-view:resize")}function qa(){c.trigger("dp:image-block:immersive-view:reset")}function ia(m){if(a.isImmersiveViewEnabled(O,P.getCurrentItem().color))if(K){var f=m.$event.originalEvent;
f.acknowledge&&f.acknowledge(m.$currentTarget[0]);k.isEnabled&&E.logImmersiveViewRequestServed(k);D.postCountMetric("dppc_immersiveViewOpened");a.isDefined(m)&&("button-360-click"===m.action?b("#iv360TabHeading").click():"videoIngressClick"===m.action?(V=m.clickTimeStamp,b("#ivVideosTabHeading").click()):"showroomIngressClick"===m.action?(V=m.clickTimeStamp,b("#ivShowroomTabHeading").click()):b("#ivImagesTabHeading").click());f=P.getImmersiveViewModalInstance();if(a.isDefined(f))f.show();else{m=b("#auiImmersiveViewDiv");
f=Math.min(Math.max(b(C).height()-150,540),1080);var t=Math.min(Math.max(b(C).width()-75,990),1980);f=K.create(m,{name:"immersiveView",activate:"onclick",width:t,height:f,popoverLabel:"ImmersiveView",hideHeader:!0});P.setImmersiveViewModalInstance(f);m.click()}Q&&(Q=!1,T(),c.trigger("dp:image-block:immersive-view:init"))}else C.performance&&performance.now&&C.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else D.postCountMetric("immersiveViewNotExistsClickCount")}
var N,O,P,J,Q=!0,ca=0,V,K;B.when("a-modal").execute(function(a){K=a});var T=c.once(function(){c.on("a:popover:afterUpdatePosition:immersiveView",t);c.on("a:popover:afterShow:immersiveView",t);c.on("a:popover:afterHide:immersiveView",qa)}),H=c.once(function(){var a=b("#iv-tab-view-container ul.iv-tab-views li");a.bind("click",function(f){var k=a.filter(".iv-active");k.attr("id")!==b(this).attr("id")&&c.trigger("dp:ivTabs:"+k.find("a").attr("data-iv-tab-view")+":deselect",f);a.removeClass("iv-active");
b(this).addClass("iv-active");b("#iv-tab-view-container .iv-tab-content").hide();k=b(this).find("a").attr("data-iv-tab-view");b("#"+k).show();"ivVideosTab"===k&&(f.clickTimeStamp=V||f.timeStamp);c.trigger("dp:ivTabs:"+k+":select",f);D.postCountMetric("dppc_"+k);return!1})});return function(b,f,t,u){N=this;O=b;P=f;k.refToModel=P;J=u;N.render=function(a,b,c,k,h,f){D.postCountMetric("dpcc_altThumbs_"+b);Q=!0};N.update=function(a){};N.getTitle=function(){};N.getVariationSelectionInfo=function(){};H();
a.isImmersiveViewEnabled(O,P.getCurrentItem().color)||a.addTag("immersiveViewNotAvailable");J.register("imageClick",ia);J.register("button360Click",ia);(O.collapsibleThumbnails||O.desktopCollapsibleThumbnails)&&c.declarative("thumb-action",["click"],function(a){a.$declarativeParent.hasClass("overlayRestOfImages")&&(ia(a),D.postCountMetric("collapsibleThumbnailImmersiveViewClick"))});a.useTabbedImmersiveView(O)&&(J.register("videoIngressClick",ia),J.register("showroomIngressClick",ia))}});"use strict";
B.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(c,b,a,D,k,E,u,t){function qa(e){return e.hiRes||e.large||e.main[e.main.length-1]}function ia(){g.find("#ivTitle").click(function(){aa.hide()})}function N(){v=Qa?{type:"360-spin"}:W.getCurrentItem()}function O(){var e=g.find("#ivStage"),a=aa.$container.find(".a-popover-wrapper"),b=a.find(".a-popover-inner");
a=a.height()-t.getDimension(b,"padding-top")-t.getDimension(b,"padding-bottom");g.css("height",a);b=g.find("#ivTitle").outerHeight(!0);var d=g.find("#ivVariationSelection").outerHeight(!0),l=g.find("#ivMediaSelection").outerHeight(!0),c=g.find("#ivThumbs"),h=t.getDimension(c,"margin-top")+t.getDimension(c,"margin-bottom");c.css("height",a-b-d-l-h);g.find("#ivLargeImage").css("height",a);e.css("width",g.width()-t.getDimension(g,"padding-left")-t.getDimension(g,"padding-right")-g.find("#ivThumbColumn").width()-
t.getDimension(e,"margin-left")-t.getDimension(e,"margin-right"))}function P(){g.find("#ivMediaSelect").change(function(){var e=b(this).val();"all"===e?(g.find("#ivVideoList").hide(),g.find("#ivThumbs").show(),g.find(".ivThumbVideo").show(),"chromeful-video"===v.type&&g.find("#ivVideo_"+v.index).click()):"images"===e?(g.find("#ivVideoList").hide(),g.find("#ivThumbs").show(),g.find(".ivThumbVideo").hide(),"chromeful-video"===v.type&&(0===X&&0===M?g.find("#iv360").click():0===X?g.find("#ivHeroImage_0").click():
g.find("#ivImage_0").click())):"videos"===e&&(g.find("#ivVideoList").show(),g.find("#ivThumbs").hide(),"chromeful-video"!==v.type?g.find("#ivVideoList_0").click():g.find("#ivVideoList_"+v.index).click())})}function J(){var e=g.find("#ivStage").find("#ivLargeImage"),a=e.width(),b=e.height(),d=e.find(".fullscreen");d.removeAttr("style");var l=d.width(),c=d.height();0<d.length&&(d[0].naturalWidth&&(l=d[0].naturalWidth),d[0].naturalHeight&&(c=d[0].naturalHeight));e.css("cursor","auto");l=0===l?1:l;c=
0===c?1:c;var h=Math.min(a/l,b/c),k=c*h,f=l*h;1>h?(Ra?e.css("cursor","url('"+n.staticImages.zoomIn+"'), auto"):(e.css("cursor","-webkit-zoom-in"),e.css("cursor","-moz-zoom-in"),e.css("cursor","zoom-in")),Aa=!0):Aa=!1;l=Math.min(f,l);c=Math.min(k-20,c);d.css({"margin-top":(b-c)/2,"margin-left":(a-l)/2,height:c,width:l});e.css("visibility","visible");Ba=!1}function Q(e){var a=g.find("#ivLargeImage");a.css("visibility","hidden");a.empty();t.animateStageIn(a);a.append(e);J()}function ca(){R&&R.pause();
g.find("#ivLarge360").css("display","none");g.find("#ivLargeVideo").css("display","none");g.find("#ivLargeImage").css("display","none");F()}function V(e){ca();g.find("#ivLargeImage").css("display","block");var d;"hero-image"===e?a.isDefined(ja)&&(d=qa(ja[v.index])):a.isDefined(na)&&(d=qa(na[v.index]));if(a.isDefined(d)){g.find(".fullscreen").remove();var l=b("\x3cimg\x3e").attr("src",d).addClass("fullscreen"),c=g.find("#ivLargeImage");t.animateStageOut(c,function(){l.load(function(){Q(l)});if(l[0].complete)Q(l);
else{c.empty();var e=(c.height()-104)/2,a=(c.width()-80)/2;b("\x3cimg\x3e").attr("src",n.staticImages.spinner).css({position:"relative",top:e+"px",left:a+"px"}).appendTo(c)}})}}function K(){var e=parseInt(v.index,10)+1;e>=da.length||g.find("#ivVideo_"+e).click()}function T(){var e;a.isDefined(da)&&(e=da[v.index]);if(a.isDefined(e)){ca();var b=g.find("#ivLargeVideo").css("display","block");R?(R.isDetached()&&R.attach(b[0]),a.loadMediaIntoAiry(R,e,ya,n.tabletWeb),R.show()):(R=a.createAiryInstanceForChromeful(b,
e,ya,"ImmersiveView"),ya.enableContinuousPlay&&R.bind("ended",K));R.play({isAsync:!0})}}function H(){N();var e="hero-image"===v.type?g.find("#ivHeroImage_"+v.index):"image"===v.type?g.find("#ivImage_"+v.index):"chromeful-video"===v.type||"chromeless-video"===v.type?g.find("#ivVideo_"+v.index):"360-spin"===v.type?g.find("#iv360"):a.isDefined(ja)?g.find("#ivHeroImage_"+v.index):g.find("#ivImage_"+v.index);a.isjQueryObjDefined(e)||(e=g.find("#ivImage_0"));m(e)}function m(e){g.find(".ivThumb").removeClass("selected");
e.addClass("selected");e.hasClass("ivThumbVideo")?(v.type="chromeful-video",v.index=e.attr("id").split("_")[1],T()):e.hasClass("ivHeroImage")?(v.type="hero-image",v.index=e.attr("id").split("_")[1],V(v.type)):e.hasClass("iv360Image")?(v.type="360-spin",v.index=0,f()):(v.type="image",v.index=e.attr("id").split("_")[1],V(v.type))}function f(){ca();g.find("#ivLarge360").css("display","block");w();var e=g.find("#ivLarge360");e.css({opacity:0});setTimeout(function(){e.css({opacity:.4});t.animateStageIn(e)},
200);x();k.postCountMetric("dppc_click360");ta=Date.now()}function F(){0<ta&&(A("dppc_duration360",Date.now()-ta),ta=0)}function A(e,a){C.ue&&C.ue.count(e,a)}function x(){if(0<ra){var e=g.find(".iv360Hint");e.removeClass("iv360HintFaded");e.animate({opacity:1},200)}}function G(e,a){if(ra<e.length){var d=b("\x3cimg /\x3e").css({display:"block",width:6*pa+"px",height:ua+"px"});d.hide();a.append(d);d.get(0).onload=function(){a.closest(document.documentElement).length&&(ra++,1===ra&&(x(),0<ta&&A("dppc_loadTime360",
Date.now()-ta)),0<Ia&&A("dppc_perSpriteloadTime360",Date.now()-Ia),g.find("#iv360Spinner").hide(),d.show(),Ca=5*I.imageLocations[Math.floor(za/I.imageLocations[0].length)][za%I.imageLocations[0].length],G(e,a))};d.attr("src",e[ra].replace(/(\._SP)\d+(,)\d+/,"$1"+va+"$2"+wa));Ia=Date.now()}}function y(e){if(a.isDefined(I.spriteWidthSizes)&&0<I.spriteWidthSizes.length){var b=I.spriteWidthSizes,d=b.length,g=b[0],l=b[d-1];if(e<=g)return g;if(e>l)return l;for(g=0;g<d;g++)if(e>b[g]&&e<=b[g+1])return b[g+
1]}else return e}function w(){var a=g.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",n.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",
transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Ja=!0,h())}function h(){if(a.isDefined(I.spriteURLs)&&a.isDefined(g)&&Ja&&!Ka){var e=g.find("#ivLarge360"),l=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});a.isDefined(I.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",I.staticImages.hint360).appendTo(l);b("\x3cdiv\x3e").css({"text-align":"center"}).text(n.staticStrings.dragToSpin).appendTo(l);
l.appendTo(e);l=I.imageWidth;var c=I.imageHeight,h=e.parent().width(),k=e.parent().height(),f=0,m=0;l/c>h/k?(va=y(h),wa=Math.round(c/l*va),pa=Math.ceil(h),ua=Math.ceil(wa/va*h),m=(k-ua)/2):(wa=y(k),va=Math.round(l/c*wa),ua=Math.ceil(k),pa=Math.ceil(va/wa*k),f=(h-pa)/2);e.css({"margin-left":f,"margin-top":m,width:pa+"px",height:ua+"px",overflow:"hidden",position:"relative"});e.children("#image-360-sprites").css("width",6*pa+"px");G(I.spriteURLs,g.find("#image-360-sprites"),0);l=g.find("#ivLarge360");
l.bind("mousedown",Y);l.bind("touchstart",p);l.bind("touchmove",d);l.bind("touchend",r);b(document).bind("mousemove",q);b(document).bind("mouseup",z);a.isDefined(n.staticImages.grab)&&e.css("cursor","url('"+n.staticImages.grab+"'), auto");Ka=!0}}function p(a){Da=!0;La=a.originalEvent.targetTouches[0].clientX}function d(a){Da&&(L(a.originalEvent.targetTouches[0].clientX-La),La=a.originalEvent.targetTouches[0].clientX)}function r(a){Da&&(Da=!1)}function Y(e){Ea=!0;Ma=e.originalEvent.clientX;a.isDefined(n.staticImages.grabbing)&&
(e=g.find("#ivLarge360"),e.css("cursor","url('"+n.staticImages.grabbing+"'), auto"),e.parents(".a-declarative").last().css("cursor","url('"+n.staticImages.grabbing+"'), auto"));return!1}function q(a){Ea&&(L(a.originalEvent.clientX-Ma),Ma=a.originalEvent.clientX)}function z(e){Ea&&(Ea=!1,a.isDefined(n.staticImages.grab)&&(e=g.find("#ivLarge360"),e.css("cursor","url('"+n.staticImages.grab+"'), auto"),e.parents(".a-declarative").last().css("cursor","auto")))}function L(e){for(e=Ca-=e/pa*180;0>e;)e+=
360;for(;360<e;)e-=360;Ca=e;e=360;for(var b=0;b<ra;b++)for(var l=0;l<I.imageLocations[b].length;l++){var d=Math.abs(Ca-5*I.imageLocations[b][l]);if(d<e){e=d;var c=b*I.imageLocations[0].length+l}}c!==za&&(e=Math.floor(c/I.imageLocations[0].length),e!==Math.floor(za/I.imageLocations[0].length)&&(a.isDefined(Na)||(Na=document.createElement("canvas").getContext("2d")),b=g.find("#image-360-sprites").children(),Na.drawImage(b[e],0,0)),e=g.find(".iv360Hint").not(".iv360HintFaded"),a.isDefined(e)&&(e.addClass("iv360HintFaded"),
e.animate({opacity:0},750)));za=c;e=c%I.imageLocations[0].length*-1*pa;c=-1*Math.floor(c/I.imageLocations[0].length)*ua;b=g.find("#ivLarge360").children("#image-360-sprites");b.css("-webkit-transform","translate3d("+e+"px, "+c+"px, 0)");b.css("transform","translate3d("+e+"px, "+c+"px, 0)")}function ba(){g.delegate(".ivThumb","click",function(){var a=b(this);m(a)});g.delegate(".ivThumbVideoListOuter","click",function(){g.find(".ivThumbVideoListOuter").removeClass("selected");var a=b(this);a.addClass("selected");
v.type="chromeful-video";v.index=a.attr("id").split("_")[1];T()})}function fa(){R&&!R.isDetached()&&(ya.volume=R.getVolume(),R.detach(),!document.all||C.atob||document.addEventListener||(R=null));g.find("#ivLargeImage").empty();F()}function S(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function la(a){var e=sa.left-(a.pageX-Fa[0])*Ga;c.capabilities.rtl&&(e=sa.left-(b(C).width()-a.pageX-Fa[0])*Ga);a=sa.top-(a.pageY-Fa[1])*Ga;e=S(e,Ha.left);a=S(a,Ha.top);g.find(".fullscreen").css({left:e,top:a})}function ha(){g.delegate("#ivLargeImage",
"click",function(a){if(Ba)J();else if(Aa){g.find(".fullscreen").removeAttr("style");if(Aa){var b=g.find("#ivLargeImage"),e=b.find(".fullscreen");Ra?b.css("cursor","url('"+n.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Ba=!0;var l=g.find("#ivLargeImage");Ha.left=l.width()-e.width();Ha.top=l.height()-e.height();l=b.height()/2;var d=b.width()/2;Fa=[b.offset().left+d,b.offset().top+l];sa.top=l-e.height()/2;sa.left=d-e.width()/
2;e.css({position:"relative",left:sa.left,top:sa.top});Ga=Math.max(e.height()/b.height(),e.width()/b.width())}la(a)}});g.delegate("#ivLargeImage","mousemove",function(a){Ba&&la(a)})}function ma(e){if(a.isImmersiveViewEnabled(n,W.getCurrentItem().color))if(Oa){var d=e.$event.originalEvent;d.acknowledge&&d.acknowledge(e.$currentTarget[0]);Qa=a.isDefined(e)&&"button-360-click"===e.action;E.isEnabled&&u.logImmersiveViewRequestServed(E);k.postCountMetric("dppc_immersiveViewOpened");if(a.isDefined(aa))aa.show();
else{e=b("#auiImmersiveViewDiv");d=b(C).height()-150;var h=b(C).width()-75;aa=Oa.create(e,{name:"immersiveView",activate:"onclick",width:h,height:d,popoverLabel:"ImmersiveView",hideHeader:!0});e.click()}if(Pa){g=b("#ivMain");e=W.getCurrentItem().color;na=n.colorImages[e];ja=n.heroImage[e];da=n.useChildVideos?n.colorToVideo[e]:n.videos;Sa=U()&&n.spin360ColorEnabled[e];I=U()?n.spin360ColorData[e]:ea;N();oa=M=l=X=0;a.isDefined(ja)&&(M=ja.length);a.isDefined(na)&&(X=na.length);a.isDefined(da)&&(l=da.length);
Sa&&(oa=1);t.populateTitle(g.find("#ivTitle"),45,n);t.populateVariationSelection(g.find("#ivVariationSelection"));e=g.find("#ivMediaSelect");0===X+oa||0===l?(e.parent().hide(),g.find("#ivThumbs").addClass("noMediaSelection")):(e.empty(),b("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(n.staticStrings.allMedia+" ("+(M+X+oa+l)+")").appendTo(e),b("\x3coption/\x3e").attr("value","images").text(n.staticStrings.images+" ("+(M+X+oa)+")").appendTo(e),b("\x3coption/\x3e").attr("value","videos").text(n.staticStrings.videos+
" ("+l+")").appendTo(e),e.parent().show(),e.val("all"));e=g.find("#ivThumbs");e.find(".ivRow").not(".placeholder").remove();d=M+X+l+oa;for(var f=h=0;h<d;)for(var p=e.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(e),m=0;3>m&&h<d;m++,h++,f++)if(f<M){var v=ja[h].thumb,r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+h).appendTo(p);r.find(".ivThumbImage").css("background",'url("'+t.getResizedThumbnailURL(v)+'") center no-repeat')}else if(f>=
M&&f<X+M)v=na[h-M].thumb,r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(h-M)).appendTo(p),r.find(".ivThumbImage").css("background",'url("'+t.getResizedThumbnailURL(v)+'") center no-repeat');else if(f>=M+X&&f<X+M+oa)r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(p),r.find(".ivThumbImage").css("background",'url("'+(a.isDefined(n.staticImages.icon360)?t.getResizedThumbnailURL(n.staticImages.icon360,
!0):"")+'") center no-repeat');else if(v=da[h-X-M-oa],r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(h-X-M-oa)).appendTo(p),r.find(".ivThumbImage").css("background",'url("'+v.thumbUrl+'") center no-repeat'),a.isDefined(v)){var R={position:"triggerTop"},q=g.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");q.find(".ivVideoPopoverTitle").text(v.title);q.find(".ivVideoPopoverDuration").text(v.durationTimestamp);
R.inlineContent=q[0];c.declarative.create(r,"a-tooltip",R)}e=g.find("#ivVideoList");e.find(".ivThumbVideoListOuter").not(".placeholder").remove();d=e.find(".placeholder");for(h=0;h<l;h++)f=da[h],p=d.clone().removeClass("placeholder").appendTo(e),p.attr("id","ivVideoList_"+h),p.find(".ivThumbImage").css("background",'url("'+f.thumbUrl+'") center no-repeat'),p.find(".ivThumbTitle").text(f.title),p.find(".ivThumbDuration").text(f.durationTimestamp);g.find("#ivLarge360").empty();ra=0;Ka=Ja=!1;ya=n.airyConfig;
Pa=!1;Ta()}}else C.performance&&performance.now&&C.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else k.postCountMetric("immersiveViewNotExistsClickCount")}function xa(b){var e=n.colorToAsin[b],l={},d=500;if(e&&e.asin){l.params={asin:e.asin};var g="360"+e.asin,c=Date.now();l.success=function(e){A("dppc_asyncRequestTime360",Date.now()-c);e&&a.isDefined(e.spin360.spin360Model)?(a.ajaxState(g,"success"),n.spin360ColorData[b]=e.spin360.spin360Model,
b===W.getCurrentItem().color&&(I=n.spin360ColorData[b],h())):l.error()};l.error=function(){k.postCountMetric("dppc_asyncFailed360");A("dppc_asyncRequestTime360",Date.now()-c);d*=2;16E3>=d?setTimeout(function(){c=Date.now();D.load("/gp/product/features/apparel-main-image/360.html",l)},d):a.ajaxState(g,"fail")};a.ajaxState(g)&&"fail"!==a.ajaxState(g)||(D.load("/gp/product/features/apparel-main-image/360.html",l),a.ajaxState(g,"sent"))}}function U(){return a.isDefined(n.spin360ConfigEnabled)&&n.spin360ConfigEnabled}
var Z,n,W,ka,aa,g,ja,na,da,M,X,l,oa,v,R,ya,I,Sa,pa,ua,wa,va,Ma,La,Qa=!1,Ja=!1,Ka=!1,Ca=0,za=0,ta=0,Ia=0,Ea=!1,Da=!1,ra=0,Na,Ra=navigator.userAgent.match(/msie|trident/i),Pa=!0,Ba=!1,Aa=!1,Ha={},sa={},Ga,Fa,Oa;B.when("a-modal").execute(function(a){Oa=a});var Ta=c.once(function(){P();ba();ha();c.on("a:popover:afterUpdatePosition:immersiveView",O);c.on("a:popover:afterShow:immersiveView",H);c.on("a:popover:afterHide:immersiveView",fa);ia()});return function(e,l,d,g){Z=this;n=e;W=l;E.refToModel=W;ka=
g;U()&&(n.spin360ColorData[n.landingAsinColor]=n.spin360ColorData[n.defaultColor],n.spin360ColorEnabled[n.landingAsinColor]=n.spin360ColorEnabled[n.defaultColor]);a.isDefined(n.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",t.addStyleCodeToURL(n.staticImages.icon360,"_FMpng_RI_"));Z.render=function(b,e,l,d,g,h){Pa=!0;U()&&n.spin360ColorEnabled[b]&&!a.isDefined(n.spin360ColorData[b])&&(n.spin360ColorData[b]={},xa(b));a.isImmersiveViewEnabled(n,
W.getCurrentItem().color)&&U()&&n.spin360ColorEnabled[b]&&(e===n.maxAlts&&(b=d.find(".item.imageThumbnail"),l=d.find(".item.videoThumbnail"),a.isDefined(l)&&1<l.length?l.last().remove():b.last().remove(),e--),b=d.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),c.declarative.create(b,"button-360-click"),d.append(b),e++,k.postCountMetric("dppc_display360"));return e};Z.update=function(a){};a.isImmersiveViewEnabled(n,W.getCurrentItem().color)||
a.addTag("immersiveViewNotAvailable");ka.register("imageClick",ma);ka.register("button360Click",ma)}});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils","hit-spin360-feature-data","hit-spin360-constants").register("ImageBlockImmersiveView360",function(c,b,a,D,k,E,u,t,C){function B(){var a=b("#iv360Tab").height();q.css("height",a);var d=q.find("#ivTitle360").outerHeight(!0),g=q.find("#ivVariationSelection360").outerHeight(!0),
c=q.find("#ivThumbs360"),h=u.getDimension(c,"margin-top")+u.getDimension(c,"margin-bottom");c.css("height",a-d-g-h);a=q.find("#ivStage360");d=q[0]&&q[0].getBoundingClientRect&&Math.floor(q[0].getBoundingClientRect().width)||q.width();a.css("width",d-u.getDimension(q,"padding-left")-u.getDimension(q,"padding-right")-q.find("#ivThumbColumn360").width()-u.getDimension(a,"margin-left")-u.getDimension(a,"margin-right"))}function N(){Q();var a=q.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});
u.animateStageIn(a)},200);O()}function O(){if(0<g){var a=q.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function P(a,c){if(g<a.length){var l=b("\x3cimg /\x3e").css({display:"block",width:6*L+"px",height:ba+"px"});l.hide();c.append(l);l.get(0).onload=function(){c.closest(document.documentElement).length&&(g++,1===g&&(O(),0<n&&(k.time("dppc_loadTime360",Date.now()-n,d.mediaAsin),E.postTimeMetric("dppc_loadTime360",Date.now()-n))),0<W&&(k.time("dppc_perSpriteloadTime360",
Date.now()-W,d.mediaAsin),E.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-W)),q.find("#iv360Spinner").hide(),l.show(),U=5*z.imageLocations[Math.floor(Z/z.imageLocations[0].length)][Z%z.imageLocations[0].length],P(a,c))};l.attr("src",a[g].replace(/(\._SP)\d+(,)\d+/,"$1"+S+"$2"+fa));W=Date.now()}}function J(b){if(a.isDefined(z.spriteWidthSizes)&&0<z.spriteWidthSizes.length){var d=z.spriteWidthSizes,g=d.length,l=d[0],c=d[g-1];if(b<=l)return l;if(b>c)return c;for(l=0;l<g;l++)if(b>d[l]&&b<=d[l+
1])return d[l+1]}else return b}function Q(){var a=q.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",d.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",
left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),ma=!0,qa())}function qa(){if(a.isDefined(z.spriteURLs)&&a.isDefined(q)&&ma&&!xa){var g=q.find("#ivLarge360"),c=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});a.isDefined(z.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",z.staticImages.hint360).appendTo(c);b("\x3cdiv\x3e").css({"text-align":"center"}).text(d.staticStrings.dragToSpin).appendTo(c);
c.appendTo(g);c=z.imageWidth;var h=z.imageHeight,k=g.parent().width(),p=g.parent().height(),r=0,n=0;c/h>k/p?(S=J(k),fa=Math.round(h/c*S),L=Math.ceil(k),ba=Math.ceil(fa/S*k),n=(p-ba)/2):(fa=J(p),S=Math.round(c/h*fa),ba=Math.ceil(p),L=Math.ceil(S/fa*p),r=(k-L)/2);g.css({"margin-left":r,"margin-top":n,width:L+"px",height:ba+"px",overflow:"hidden",position:"relative"});g.children("#image-360-sprites").css("width",6*L+"px");P(z.spriteURLs,q.find("#image-360-sprites"),0);c=q.find("#ivLarge360");c.bind("mousedown",
H);c.bind("touchstart",V);c.bind("touchmove",K);c.bind("touchend",T);b(document).bind("mousemove",m);b(document).bind("mouseup",f);a.isDefined(d.staticImages.grab)&&g.css("cursor","url('"+d.staticImages.grab+"'), auto");xa=!0}}function V(a){aa=!0;ha=a.originalEvent.targetTouches[0].clientX}function K(a){aa&&(F(a.originalEvent.targetTouches[0].clientX-ha),ha=a.originalEvent.targetTouches[0].clientX)}function T(a){aa&&(aa=!1)}function H(b){ka=!0;la=b.originalEvent.clientX;a.isDefined(d.staticImages.grabbing)&&
(b=q.find("#ivLarge360"),b.css("cursor","url('"+d.staticImages.grabbing+"'), auto"),b.parents(".a-declarative").last().css("cursor","url('"+d.staticImages.grabbing+"'), auto"));return!1}function m(a){ka&&(F(a.originalEvent.clientX-la),la=a.originalEvent.clientX)}function f(b){ka&&(ka=!1,a.isDefined(d.staticImages.grab)&&(b=q.find("#ivLarge360"),b.css("cursor","url('"+d.staticImages.grab+"'), auto"),b.parents(".a-declarative").last().css("cursor","auto")))}function F(b){U-=b/L*180;na&&(k.count("dppc_360dragToSpin",
d.mediaAsin),E.postCountMetric("dppc_360dragToSpin"));na=!1;for(b=U;0>b;)b+=360;for(;360<b;)b-=360;U=b;b=360;for(var c=0;c<g;c++)for(var h=0;h<z.imageLocations[c].length;h++){var l=Math.abs(U-5*z.imageLocations[c][h]);if(l<b){b=l;var f=c*z.imageLocations[0].length+h}}f!==Z&&(b=Math.floor(f/z.imageLocations[0].length),b!==Math.floor(Z/z.imageLocations[0].length)&&(a.isDefined(ja)||(ja=document.createElement("canvas").getContext("2d")),c=q.find("#image-360-sprites").children(),ja.drawImage(c[b],0,0)),
b=q.find(".iv360Hint").not(".iv360HintFaded"),a.isDefined(b)&&(b.addClass("iv360HintFaded"),b.animate({opacity:0},750)));Z=f;b=f%z.imageLocations[0].length*-1*L;f=-1*Math.floor(f/z.imageLocations[0].length)*ba;c=q.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+b+"px, "+f+"px, 0)");c.css("transform","translate3d("+b+"px, "+f+"px, 0)")}function A(){if(M){q=b("#ivMain360");var a=r.getCurrentItem().color;G()&&y(a);z=G()?d.spin360ColorData[a]:ea;u.populateTitle(q.find("#ivTitle360"),
160,d);u.populateVariationSelection(q.find("#ivVariationSelection360"));q.find("#ivLarge360").empty();g=0;xa=ma=!1;Z=U=0;X();M=!1}0!==b("#iv360Tab").height()&&(u.detachImmersiveViewResizeHandler(A),B(),N(),n=Date.now(),da=na=!0,k.count("dppc_click360",d.mediaAsin),E.postCountMetric("dppc_click360"))}function x(b,c,g){b=d.colorToAsin[g];var h={},f=500;if(!b||!b.asin)if(g===d.defaultColor)b={asin:d.winningAsin};else return;h.params={asin:b.asin};var l="360"+b.asin,p=Date.now();h.success=function(b){k.time("dppc_asyncRequestTime360",
Date.now()-p,d.mediaAsin);E.postTimeMetric("dppc_asyncRequestTime360",Date.now()-p);b&&a.isDefined(b.spin360)?((b=b.spin360.spin360Model)&&t.setData(b),a.ajaxState(l,"success")):h.error()};h.error=function(){k.count("dppc_asyncFailedTransient360",d.mediaAsin);E.postCountMetric("dppc_asyncFailedTransient360");k.time("dppc_asyncRequestTime360",Date.now()-p,d.mediaAsin);E.postTimeMetric("dppc_asyncRequestTime360",Date.now()-p);f*=2;16E3>=f?setTimeout(function(){p=Date.now();D.load("/gp/product/features/apparel-main-image/360.html",
h)},f):(k.count("dppc_asyncFailed360",d.mediaAsin),E.postCountMetric("dppc_asyncFailed360"),a.ajaxState(l,"fail"))};a.ajaxState(l)&&"fail"!==a.ajaxState(l)||(D.load("/gp/product/features/apparel-main-image/360.html",h),a.ajaxState(l,"sent"))}function G(){return d&&a.isDefined(d.spin360ConfigEnabled)&&d.spin360ConfigEnabled}function y(b){return a.isDefinedAndNotEmpty(d.spin360ColorData[b])?!0:a.isDefined(d.spin360LazyLoadEnabled)&&d.spin360LazyLoadEnabled}function w(){da&&(k.time("dppc_duration360",
Date.now()-n,d.mediaAsin),E.postTimeMetric("dppc_duration360",Date.now()-n),da=!1)}function h(a){a=d.colorToAsin[a.color]&&d.colorToAsin[a.color].asin;a||(a=d.mediaAsin);return a}var p,d,r,Y,q,z,L,ba,fa,S,la,ha,ma=!1,xa=!1,U=0,Z=0,n=0,W=0,ka=!1,aa=!1,g=0,ja,na=!0,da=!1,M=!0,X=c.once(function(){u.attachImmersiveViewResizeHandler(A);u.attachImmersiveViewResizeHandler(B);u.attachImmersiveViewResetHandler(w);u.attachTabDeselectHandler("iv360Tab",w)});return function(g,f,m,n){p=this;d=g;r=f;Y=n;g=d.landingAsinColor;
f=d.defaultColor;a.isDefined(d.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",u.addStyleCodeToURL(d.staticImages.icon360,"_FMpng_RI_"));G()&&(d.spin360ColorData||(d.spin360ColorData={}),g===f&&a.isDefinedAndEmpty(d.spin360ColorData[f])&&delete d.spin360ColorData[f]);c.on(C.TWISTER_DATA_EVENT,function(a){h(r.getCurrentItem())===a&&(z=t.getData(a),qa(),a={type:"updatedData",data:r.getCurrentItem()},Y.dispatch("updateView",a))});p.render=function(g,
f,p,l,m,n){M=!0;!G()||a.isDefinedAndEmpty(d.spin360ColorData[g])&&!t.getData(h(r.getCurrentItem()))?u.hideTabHeading("iv360TabHeading"):(d.spin360ColorData[g]=t.getData(h(r.getCurrentItem())),a.isDefinedAndNotEmpty(d.spin360ColorData[g])?(b("#ivThumbs360").hide(),u.unhideTabHeading("iv360TabHeading"),a.isImmersiveViewEnabled(d,r.getCurrentItem().color)&&G()&&y(g)&&(f===d.maxAlts&&(g=l.find(".item.imageThumbnail"),f=l.find(".item.videoThumbnail"),a.isDefined(f)&&1<f.length?f.last().remove():g.last().remove()),
g=l.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),c.declarative.create(g,"button-360-click"),l.append(g),k.count("dppc_display360",d.mediaAsin),E.postCountMetric("dppc_display360"))):a.isDefined(d.spin360LazyLoadEnabled)&&d.spin360LazyLoadEnabled?(d.spin360ColorData[g]={},u.hideTabHeading("iv360TabHeading"),x(l,f,g)):u.hideTabHeading("iv360TabHeading"))};p.update=function(a){};u.attachTabSelectHandler("iv360Tab",A)}});B.register("nexusLogger360",
function(){return{count:function(c,b){C.ue&&C.ue.event({asin:b,metricName:c,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(c,b,a){C.ue&&C.ue.event({asin:a,metricName:c,metricValue:b},"hit-360","hit360.clientEvent.3")}}});B.register("hit-spin360-constants",function(){return{TWISTER_DATA_EVENT:"spin360TwisterData"}});B.when("A","hit-spin360-constants").register("hit-spin360-feature-data",function(c,b){var a={};return{setData:function(D){var k=D.asin;a[k]||(a[k]=D,c.trigger(b.TWISTER_DATA_EVENT,
k))},getData:function(b){return a[b]}}});"use strict";B.when("postMetric").register("ImageBlockImmersiveViewShowroom",function(c){function b(){this.render=function(){};this.update=function(){}}return function(a,D,k,E){var u=!1,t=new b;B.now("showroom-image-block-view").execute("showroom-image-block-view-decider",function(b){b!==ea&&(u=!0,t=new b(a,D,k,E))});a&&!0===a.showroomEnabled&&!1===u&&c.postCountMetric("showroom:atf:imageBlock:hiddenDueToAssetsNotPresentInTime");return t}});"use strict";B.when("A",
"jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(c,b,a,D,k,E,u){function t(){x.delegate(".ivThumb","click",function(){var a=b(this);x.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")&&(G.type="chromeful-video",G.index=a.attr("id").split("_")[1])})}function B(){if(ha){var a=b("#ivVideosTab").height();x.css("height",a);var d=x.find(".vse-lb-container");
y=a-k.getDimension(d,"padding-top")-k.getDimension(d,"padding-bottom");d.css({"max-height":a,overflow:"hidden"});if(ba){x.css({"max-width":Math.floor(1.77*y)});return}a=x.find(".vse-player-container");d=x.find(".vse-video-action-strip");var c=x.find(".vse-lb-video-metadata"),h=Math.floor(y-k.getDimension(c,"height")-k.getDimension(d,"height")),f=Math.floor(1.77*h);a.css({"max-height":h,"max-width":f,marginLeft:"auto",marginRight:"auto"});c.css({"max-width":f,marginLeft:"auto",marginRight:"auto"});
d.css({"max-width":f,marginLeft:"auto",marginRight:"auto"})}fa&&(a=x.find(".vse-vertical-scroll"),d=k.getDimension(a,"margin-top")+k.getDimension(a,"margin-bottom"),a.css("max-height",y-d))}function ia(){N();w&&w.pause();S=!1;z=!0;r=null;la=!0;ha=!1}function N(){S=!1;w&&w.pause()}function O(d){r=d.clickTimeStamp?d.clickTimeStamp:c.now();a.isDefined(A)&&(A.eventTimestamp=r);S=!0;L&&(u.get(c,"#ivVideoBlock",F,ka,aa),x=b("#ivVideoBlock"),f.getCurrentItem(),G=f.getCurrentItem(),Z(),K());B();L=!1;Q()}
function P(a){L&&(x=b("#ivVideoBlock"),f.getCurrentItem(),G=f.getCurrentItem(),Z());S&&Q();B()}function J(a){w=a.player;D.postTimeMetric("vse_ib_desktop_player_initialisation_duration",c.now()-U);m.imageBlockRenderingStartTime&&D.postTimeMetric("vse_ib_desktop_time_to_player_interactive",c.now()-m.imageBlockRenderingStartTime);ha&&(K(),Q())}function Q(){if(w&&S&&(x.find(".vse-lb-container").animate({opacity:1},200),w.play(A),D.postCountMetric("dpcc_vse_videoBlock_video_played"),z)){var a=C.ue;a&&
(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,D.postTimeMetric("dpcc_vse_vitff",a),z=!1)}}function ca(){c.trigger("vse:detailpage-imageblock:page:lightBoxClosed")}function V(a){h=a.popover.$popover;ha=!0;K()}function K(){if(ha&&la&&S&&w){h.addClass(c.$(h).find(".vse-lb-container").data("cssClass"));var a=A;ma&&(a=ea,ma=!1);c.trigger("vse:detailpage-imageblock:page:lightBoxOpened",{lightBoxId:"ivVideoBlock",assetSpec:a});B();la=!1}}function T(a){document.getElementsByClassName("videoBlockIngress")[0].click();
ea=a;ma=!0}var H,m,f,F,A,x,G,y,w,h,p,d,r,Y,q,z=!0,L=!0,ba=!1,fa=!1,S=!1,la=!0,ha=!1,ma=!1,ea,U=0,Z=c.once(function(){t();k.attachImmersiveViewResizeHandler(P);k.attachTabDeselectHandler("ivVideosTab",N);k.attachImmersiveViewResetHandler(ia)}),n=function(d,c,h){b("#ivVideoBlockSpinner").addClass("aok-hidden");D.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+c.placement);d=f.getCurrentItem().color;d=a.getVideoHash(d,0,m);w||(w=a.createAiryInstanceForChromeful(b("#ivVideoBlock"),d,m.airyConfig,
"ImmersiveView"));ba=!0;b("#ivVideoBlock").css({"max-width":1.77*y,margin:"0 auto"});S&&ba&&w.play({isAsync:!0})},W=function(a,d,c){L||u.get(a,"#ivVideoBlock",F,ka,aa);b("#ivVideoBlockSpinner").addClass("aok-hidden")},ka=function(a,b,d){fa=!0;B()},aa=function(a,b,d){D.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(b,h,t,u){H=this;m=b;f=h;H.render=function(b,h,g,t,v,u){b=f.getCurrentItem().color;h=a.getVideoHash(b,0,m);!0===
u?p=m.mediaAsin:(p=m.colorToAsin[b]&&m.colorToAsin[b].asin,p=a.isDefined(p)?p:m.mediaAsin);d=!0===m.useVSEVideos?"VIDEO_ID":"physicalID";Y=m.contentWeblab;q=m.contentWeblabTreatment;L=!0;-1===h?k.hideTabHeading("ivVideosTabHeading"):(k.unhideTabHeading("ivVideosTabHeading"),F={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:h.marketPlaceID,locale:h.languageCode,product:{contentID:p,contentIDType:"ASIN"},video:{contentID:h.mediaObjectId,contentIDType:d,videoURL:h.url,imageURL:h.slateUrl,
rankingStrategy:h.rankingStrategy},requestId:m.dpRequestId,weblabContext:[{name:Y,assignment:q,ignoreForG2S2Key:!0}],metadata:{ProductTitle:m.title}},A={videoUrl:F.video.videoURL,contentId:F.video.contentID,duration:0,vendorCode:"",eventTimestamp:a.isDefined(r)?r:c.now(),imageUrl:F.video.imageURL,productAsin:F.product.contentID,rankingStrategy:F.video.rankingStrategy,index:0},a.isDefinedAndNotEmpty(w)&&(w.destroy(),w=null),U=c.now(),E.get(c,"#ivVideoBlock",F,W,n))};H.update=function(a){};k.attachTabSelectHandler("ivVideosTab",
O);c.on("vsePlayer-detailpage-imageblock",J);c.on("a:popover:afterShow:immersiveView",V);c.on("a:popover:beforeHide:immersiveView",ca);c.on("detailpage-imageblock-leave-pip",T)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockShoppableSceneImmersiveView",function(c,b,a,D,k){function E(a,c){if(a){A=m.getCurrentItem();0==Object.entries(w).length&&u();var d=A.shoppableScene;d==ea?(a=K(Object.values(w)[0]),d=Object.values(w)[0].shoppableScene):
a=K(F[A.index]);y=d.physicalId;var h=b(".shoppable-scene-image-block-placeholder-in-iv");if(0<h.length){var k=b("\x3cimg\x3e");k.attr("id","shoppableSceneIvImage");k.attr("src",a);k.css({"max-height":"500px","max-width":"650px"});h.replaceWith(k);a=t(d);d=b(".shoppable-scene-image-block-tags-in-iv");d.empty();a.appendTo(d)}else f.hide(),J();ia();a=A.shoppableScene?A.shoppableScene:Object.values(w)[0].shoppableScene;N(a);Q(c,x,null,y)}}function u(){F=H.colorImages[A.color];x=H.colorToAsin[A.color].asin;
F.forEach(function(a){a.shoppableScene!=ea&&(w[a.shoppableScene.physicalId]=a)})}function t(a){var h=b("\x3cspan\x3e");c.each(a.tags,function(d){var f=b("\x3cdiv\x3e").css({position:"absolute",left:100*d.left+"%",top:100*d.top+"%",height:"auto",width:"auto"});f.append(C(!1));f.append(C(!0));c.declarative.create(f,"scenes-show-details-tags-ib-iv-click",{tagId:d.link,physicalId:a.physicalId});h.append(f)});return h.children()}function C(a){var c=b("\x3cimg src\x3d'"+(a?H.staticImages.shoppableSceneDotHighlighted:
H.staticImages.shoppableSceneDot)+"' alt\x3d''\x3e");c.css({display:a?"none":"inline-block"});c.addClass("mirai-scene-tag-in-iv").addClass(a?"active-tag":"inactive-tag");return c}function ia(){var a=b(".ivBottomThumbImagesShoppableScene");a.empty();Object.keys(w).forEach(function(h){var d=w[h],f=b("\x3cimg\x3e");d=K(d);f.attr("id","shoppable-scene-thumbnail-"+h);f.attr("src",d);f.addClass("shoppable-scene-thumbnail");c.declarative.create(f,"scenes-thumbnail-ib-iv-click",{physicalId:h});f.appendTo(a)})}
function N(a){V();B.when("mirai-shoppable-scene-immersive-view").execute("shoppable-scene-image-recommendation-col-render",function(){c.trigger("mirai:scene-immersive-recommendation-col-init",{scene:a})})}function O(a,b){V();B.when("mirai-shoppable-scene-immersive-view").execute("shoppable-scene-image-recommendation-col-updater",function(){c.trigger("mirai:scene-immersive-recommendation-col-update",{tagId:a,physicalId:b})})}function P(){var a=w[y].shoppableScene,c=b(".shoppable-scene-image-block-tags-in-iv");
c.hide();a=t(a);c.empty();a.appendTo(c);c.show();f.show()}function J(){var a=K(w[y]),c=b("#shoppableSceneIvImage");c.bind("load",P);c.attr("src",a)}function Q(a,b,d,f){var h="shoppable-scene-dp-iv:mirai:"+a;B.when("mirai-shoppable-scene-immersive-view").execute("shoppable-scene-image-recommendation-col-updater",function(){c.trigger("mirai:scene-immersive-publish-metric",{nexusTargetName:a,csmCounterName:h,asin:b,tagId:d,physicalId:f})})}function ca(){var a=b(".shoppable-scene-image-block-tags-in-iv").find(".mirai-scene-tag-in-iv");
a.removeClass("mirai-scene-dot-pulsate").addClass("mirai-scene-dot-pulsate");c.delay(function(){a.removeClass("mirai-scene-dot-pulsate")},3600)}function V(){var a=b("#shoppable-scene-iv-recommendation-waiting-spinner");0<a.length&&a.remove();a=b("#shoppableSceneRecommendationColumn");b(".shoppable-scene-recommendation-iv").hide();var c=b("\x3cimg\x3e");c.attr("id","shoppable-scene-iv-recommendation-waiting-spinner");c.attr("src",H.staticImages.spinner);c.css({position:"relative"}).appendTo(a)}function K(a){return a.hiRes||
a.large||a.main[a.main.length-1]}var T=void 0,H=void 0,m=void 0,f=void 0,F=void 0,A=void 0,x=void 0,G=void 0,y=void 0,w={};c.declarative("shoppable-scene-image-click","click",function(a){E(!0,"IMAGE_BLOCK_SHOPPABLE_SCENE")});c.declarative("scenes-show-details-tags-ib-iv-click","click",function(a){var b=a.$currentTarget;if(null!=G){var c=G.find(".active-tag"),f=G.find(".inactive-tag");c.css({display:"none"});f.css({display:"inline-block"})}c=b.find(".active-tag");f=b.find(".inactive-tag");c.css({display:"inline-block"});
c.addClass("mirai-scene-dot-pulsate");f.css({display:"none"});G=b;ca();O(a.data.tagId,a.data.physicalId);Q("IMMERSIVE_VIEW_PRODUCT_TAG",x,a.data.tagId,a.data.physicalId)});c.declarative("scenes-thumbnail-ib-iv-click","click",function(a){y=a.data.physicalId;J();N(w[y].shoppableScene)});return function(a,c,d,k){T=this;H=a;m=c;f=b("#ivMainShoppableScene");T.render=function(a,b,c,d,f,h){};T.update=function(a){};(a=document.getElementById("ivShoppableSceneHeading"))&&a.addEventListener("click",function(a){a=
m.getCurrentItem();E(null==A||A.index!=a.index,"IMMERSIVE_VIEW_TAB")})}})});
/* ******** */
(function(e){var f=window.AmazonUIPageJS||window.P,l=f._namespace||f.attributeErrors,a=l?l("DetailPageImageBlockSubAssets@logging","DetailPageImageBlockSubAssets"):f;a.guardFatal?a.guardFatal(e)(a,window):a.execute(function(){e(a,window)})})(function(e,f,l){e.when("A","postMetric","ready").execute("feature-bullets-tailoring-metrics",function(a,b){try{var c=a.$,d=c("#featurebullets_feature_div"),k=c("#productOverview_feature_div");if(d&&0<d.length&&(b.postCountMetric("FeatureBulletsRendered.GV"),k&&
0<k.length)){b.postCountMetric("FeatureBulletsRenderedWithPO.GV");var g=c("#featurebullets_feature_div .a-expander-container");g&&0<g.length&&"feature-bullets-expander"===g.data("aExpanderName")&&(b.postCountMetric("FeatureBulletsRenderedCollapsed.GV"),a.on("a:expander:feature-bullets-expander:toggle:expand",function(a){b.postCountMetric("FeatureBulletsInteraction.Expanded")}),a.on("a:expander:feature-bullets-expander:toggle:collapse",function(a){b.postCountMetric("FeatureBulletsInteraction.Collapsed")}))}}catch(m){e.log("Feature bullets metric logging failed with error: ( "+
m+" )","ERROR","FeatureBulletsTailoringMetrics")}});"use strict";e.when("A","ImageBlockATF","ImageBlockBTF","imageBlockUtils","postMetric").execute(function(a,b,c,d,k){var g=[0,50,100,500,1E3,2E3,3E3,3500];(function(){var a=c.colorImages,b=0,h;for(h in a)a[h]&&a[h].length&&(b+=a[h].length);a="image_size_bucket:gt"+g[g.length-1];for(h=1;h<g.length;h++)if(b<=g[h]){a="image_size_bucket:"+g[h-1]+"-"+g[h];break}k.postCountMetric(a);d.addTag(a)})();(function(){var a=b.colorImages;a&&a.initial&&a.initial.length&&
(a=a.initial.length,f.ue&&ue.count&&ue.count("altImageCount",a))})();(function(){var a=c.lazyLoadExperienceDisabled;d.isDefined(c.lazyLoadExperienceDisabled)&&!a&&(k.postCountMetric("lazyLoadingExperienceOnTwisterUpdateEnabled"),d.addTag("lazyLoadingExperienceOnTwisterUpdateEnabled"))})()});"use strict";e.register("logFailedInteractionMetric",function(){return{isEnabled:!1}});e.register("postEarlyMetric",function(){return null});"use strict";e.register("postMetric",function(){return{postCountMetric:function(a){if("undefined"!==
typeof a){var b=f.ue;if(b){var c=b.count(a)||0;b.count(a,c+1)}}},postTimeMetric:function(a,b){if("undefined"!==typeof a&&"undefined"!==typeof b){var c=f.ue;c&&c.count(a,b)}},emitNexusMetric:function(a){f.ue&&ue.event&&ue.event(a,"VSEImageBlockEvents","vse.VSEImageBlockEvents.5",{ssd:!1})},buildNexusMetric:function(a,b,c,d,k,g,e,f,h){return{eventSource:"IBCarousel",placementContext:h,clientId:"VSE",userAgentData:navigator.userAgent,titleSessionId:"0",eventName:a,intPayload:b,videoAsin:c,videoAsinList:"",
rankingStrategy:d,groupType:k,pageUrl:g,pageAsin:e,weblabIds:f}}}});"use strict";e.when("A","get-resource-time","postMetric","afterLoad").execute(function(a,b,c){var d=a.state("desktop-landing-image-data");d&&(d=a.values(d),b=b.getResourceTimeByName("img",d),a.each(b,function(a){a&&(a.responseEnd!=l&&c.postCountMetric("ibDesktopLandingImageDownloadTime",f.parseInt(a.responseEnd)),a.transferSize!=l&&(0===a.transferSize?c.postCountMetric("ibDesktopLandingImageCached",1):(c.postCountMetric("ibDesktopLandingImageSizeInBytes",
f.parseInt(a.transferSize)),c.postCountMetric("ibDesktopLandingImageNotCached",1))))}))})});
/* ******** */
(function(l){var g=window.AmazonUIPageJS||window.P,r=g._namespace||g.attributeErrors,e=r?r("DetailPageImageBlockSubAssets@utils","DetailPageImageBlockSubAssets"):g;e.guardFatal?e.guardFatal(l)(e,window):e.execute(function(){l(e,window)})})(function(l,g,r){l.when("ImageBlockATF","atf").register("ImageBlockAiryLoader",function(e){function f(d){d&&(l.load.js(d),g.performance&&performance.now&&g.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",g.parseInt(performance.now())))}function k(d){d&&l.load.css(d)}
var d=e.airyConfig;d===r?l.when("ImageBlockBTF").execute(function(e){d=e.airyConfig;f(d.jsUrl);k(d.cssUrl)}):(f(d.jsUrl),k(d.cssUrl))});"use strict";l.when("A","jQuery").execute(function(e,f){e.on("a:image:load:landingImage",function(){g.performance&&performance.now&&g.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",performance.now())});e.loadDynamicImage(f("#landingImage"))});"use strict";l.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(e,f){function k(a,c){if(c.repositionHeroImage){c=
a[1];a=a[0];if(768>=(g.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))c*=.7,a*=.7;else{var b=Math.max(Math.min(((g.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,1),0);c*=.7+.3*b;a*=.7+.3*b}b=[c,a]}return b}function d(a,c,b){if(b.repositionHeroImage){var d=g.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;b=b.heroFocalPoint;if(f.isDefined(b)){var e=Math.max((d-Math.min(1500,a))/2,0);var k=Math.max((d-
a)/2,0);d=Math.max(Math.min(d,1500),1024);e=e-k+(d-420-23)/2-a/c[1]*b}}return e}function h(a,c,b){a=a.heroImage;return!(f.isDefined(a)&&f.isDefined(a[c])&&f.isDefined(a[c][b])&&f.isDefined(a[c][b].main))||1>e.map(a[c][b].main,function(a,b){return b}).length?-1:a[c][b]}return{getHeroImageHash:h,getHeroDimParams:function(a,c,b){if(a.repositionHeroImage){if(!f.isDefined(b)){b=h(a,c.color,c.index);if(-1===b)return;c=e.map(b.main,function(a,b){return b})[0];b=b.main[c]}c=k(b,a);a=d(c[0],b,a);return{height:c[1],
width:c[0],xPos:a,yPos:75}}}}});"use strict";l.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(e,f,k){function d(a,c){var b=e.copy(a);if(k.isDefined(a)&&a.length>c){try{for(var d=-1,h=0;h<a.length;h++){var f=a.charAt(h);if(" "===f||"."===f||"?"===f||";"===f||","===f||":"===f)d=h;if(h===c-4){b=a.substring(0,-1===d?h:d);break}}}catch(m){b=a.substring(0,c-3)}b+="..."}return b}function h(a,c){var b=a.lastIndexOf(".");return a="_"===a.charAt(b-1)?a.substring(0,b-1)+
c+a.substring(b):a.substring(0,b)+"."+c+a.substring(b)}return{getDimension:function(a,c){a=parseInt(a.css(c),10);return isNaN(a)?0:a},attachTabSelectHandler:function(a,c){e.on("dp:ivTabs:"+a+":select",c)},attachTabDeselectHandler:function(a,c){e.on("dp:ivTabs:"+a+":deselect",c)},attachImmersiveViewResizeHandler:function(a){e.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){e.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){e.on("a:popover:afterHide:immersiveView",
a)},hideTabHeading:function(a){f("#"+a).hide()},unhideTabHeading:function(a){f("#"+a).show()},addStyleCodeToURL:h,getResizedThumbnailURL:function(a,c){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var b="_AA50_";c&&(b+="FMpng_RI_");return h(a,b)},populateVariationSelection:function(a){if(k.isDefined(g.DetailPage)&&k.isDefined(g.DetailPage.StateController)){a.empty();
var c=g.DetailPage.StateController.getState(),b=c.variation_label_order,d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d],h=c.selected_variations[e];e=c.variation_display_labels[e];h&&f("\x3cdiv/\x3e").addClass("ivVariations").text(e+":"+h).appendTo(a)}}},populateTitle:function(a,c,b){a.html(b.title);a.attr("title",a.text());a.html(d(b.title,c))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,c){a.animate({opacity:.4},100,c)},logError:function(a,c,b,d){g.ueLogError&&
g.ueLogError(d,{logLevel:a,attribution:c,message:b})}}});"use strict";l.when("A").register("ImageBlockLoader",function(e){return{load:function(f,k){k=k||{};k.timeout=k.timeout||4E3;e.ajax(f,k)}}});"use strict";l.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(e,f){l.register("vse_ns_preLoaderHook",function(){function k(d,h){try{var a=d.A,c=d.block,b=d.request,g=d.handleFailure,l=d.handleSuccess,p=a.$;h--;var m=3-h-1,n=a.now();a.ajax("/vap/ew/componentbuilder",
{params:b,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:b.timeout||5E3,withCredentials:!0,success:function(d){var h=a.now()-n;e.postTimeMetric("vse_preLoaderHook:success:",h);e.postCountMetric("vse_preLoaderHook:success:"+b.page+":"+b.placement+":"+m);p(c).html(d);l(a,b,d)},error:function(c){e.postCountMetric("vse_preLoaderHook:error:"+b.page+":"+b.placement+":"+m);(0===c.http.status||500<=c.http.status&&599>=c.http.status)&&0<h?k(d,h):(e.postCountMetric("vse_preLoaderHook:error:",
1),g(a,b,c))}})}catch(q){f.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",q)}}return{get:function(d,e,a,c,b){k({A:d,block:e,request:a,handleFailure:b,handleSuccess:c},3)}}});l.register("vse_ns_lazyLoaderHook",function(){function k(d,h,a){try{var c=d.A,b=d.context,g=d.handleFailure,l=d.handleSuccess;h.attr("data-configuration");var p=atob(h.attr("data-configuration")),m=JSON.parse(p),n={pageContext:b,configuration:m},q=c.now();a--;var t=3-a-1;c.ajax("/vap/ew/subcomponent/"+m.type,{params:n,
paramsFormat:"json",method:"post",contentType:"application/json",timeout:b.timeout||5E3,withCredentials:!0,success:function(a){var d=c.now()-q;e.postTimeMetric("vse_lazyLoaderHook:success:",d);e.postCountMetric("vse_lazyLoaderHook:success:"+b.page+":"+b.placement+":"+m.type+":"+t);h.html(a);l(c,n,a)},error:function(f){e.postCountMetric("vse_lazyLoaderHook:error:"+b.page+":"+b.placement+":"+m.type+":"+t);(0===f.http.status||500<=f.http.status&&599>=f.http.status)&&0<a?k(d,h,a):(e.postCountMetric("vse_lazyLoaderHook:error:",
1),g(c,n,f))}})}catch(u){f.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",u)}}return{get:function(d,e,a,c,b){var f=d.$;f(e+" div[data-configuration]").each(function(){k({A:d,context:a,handleFailure:b,handleSuccess:c},f(this),3)})}}});l.register("vse_ns_videoPlayer",function(){function k(d,h,a){try{var c=d.A,b=d.block,g=d.request,l=d.handleFailure,p=d.handleSuccess,m=c.$;a--;var n=3-a-1,q=c.now();c.ajax("/vap/ew/subcomponent/vseplayer",{params:g,paramsFormat:"json",crossDomain:!0,method:"post",
contentType:"application/json",timeout:g.timeout||5E3,withCredentials:!0,success:function(a){var d=c.now()-q;e.postTimeMetric("vse_lightPlayerLoaderHook:success:",d);e.postCountMetric("vse_lightPlayerLoaderHook:success:"+g.page+":"+g.placement+":"+n);m(b).html(a);p(c,g,a)},error:function(b){e.postCountMetric("vse_lightPlayerLoaderHook:error:"+g.page+":"+g.placement+":"+n);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<a?k(d,a):(e.postCountMetric("vse_lightPlayerLoaderHook:error:",
1),l(c,g,b))}})}catch(t){f.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",t)}}return{get:function(d,e,a,c,b){k({A:d,block:e,request:a,handleFailure:b,handleSuccess:c},3)}}})})});
/* ******** */
(function(k){var d=window.AmazonUIPageJS||window.P,p=d._namespace||d.attributeErrors,b=p?p("DetailPageShowroomImageBlockAssets",""):d;b.guardFatal?b.guardFatal(k)(b,window):b.execute(function(){k(b,window)})})(function(k,d,p){k.when("A","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-detail-page-rendering","showroom-image-block-constants","showroom-image-block-metrics").register("showroom-image-block-view",function(b,f,m,g,e,a){function c(h){h.interaction===p.MOUSE_ENTER&&
h.type===e.SHOWROOM_THUMBNAIL_TYPE&&g.isShowroomMainImageHidden()&&a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER)}function d(b,e){var d=new Date;b.interaction=e.type;b.isUserGenerated=!0;if(f.isImageBlockGridViewHoverDelayEnabled()){if("mouseenter"===e.type&&m.isDataValidForAsin(u(b))&&(c(b),q&&clearTimeout(q),q=setTimeout(function(){var a=m.getDataForAsin(u(b)).imageData;g.updateMainImage(h,a,r);g.showShowroomMainImage(h);n.usePeekHover||f.selectGivenThumbnail(e.$declarativeParent,
x)},f.getHoveringDelayTimer())),"mouseleave"===e.type&&q&&clearTimeout(q),"click"===e.type){if(m.isDataValidForAsin(u(b))){var l=m.getDataForAsin(u(b)).imageData;g.updateMainImage(h,l,r);g.showShowroomMainImage(h)}f.selectGivenThumbnail(e.$declarativeParent,x);f.useTabbedImmersiveView(n)&&g.handleShowroomThumbnailClick(e)}}else m.isDataValidForAsin(u(b))&&(c(b),l=m.getDataForAsin(u(b)).imageData,g.updateMainImage(h,l,r),g.showShowroomMainImage(h)),n.usePeekHover&&"click"!==e.type||(f.selectGivenThumbnail(e.$declarativeParent,
x),"click"===e.type&&f.useTabbedImmersiveView(n)&&g.handleShowroomThumbnailClick(e));a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT,new Date-d)}function u(a){a=n.colorToAsin[a.color].asin;a||(a=n.mediaAsin);return a}var k=void 0,n=void 0,l=void 0,r=void 0,x=void 0,h=void 0,y=void 0,q=void 0,v=void 0,p={SWATCH_HOVER:"swatchHover",MOUSE_ENTER:"mouseenter"};return function(c,q,t,z){t=new Date;k=this;n=c;l=q;r=z;b.on(e.TWISTER_DATA_EVENT,function(a){u(l.getCurrentItem())===
a&&(a={type:"updatedData",data:l.getCurrentItem()},r.dispatch("updateView",a))});k.render=function(e,f,c,d,k,q){e=new Date;x=d;h=k.find("#main-showroom-container");h.parent().find("#showroom-canvas-caption");b.$("#main-image-container");try{var w=u(l.getCurrentItem());if(m.isDataValidForAsin(w)){var p=new Date,t=m.getDataForAsin(w);g.refresh(r,t.asin,t.defaultStageId);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN,new Date-p);if(!q){var B=new Date;g.updateMainImage(h,
t.imageData,r);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE,new Date-B)}var v=new Date;f=g.createThumbnail(n,d,f,t.imageData);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL,new Date-v);var z=new Date;b.$("#ivShowroomTabHeading").removeClass("aok-hidden");a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING,new Date-z);if(w!==y){var A=new Date;a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED);var C=
a.createShowroomAtfEvent(t.defaultStageId,w,a.EVENT_NAMES.IMAGEBLOCK_LOAD,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(C);y=w;a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT,new Date-A)}}else b.$("#ivShowroomTabHeading").addClass("aok-hidden")}catch(E){b.$("#ivShowroomTabHeading").addClass("aok-hidden")}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER,new Date-e);return f};k.update=function(b){var r=new Date;try{var c=b.data;l.setCurrentEvent(b);c.type===e.SHOWROOM_THUMBNAIL_TYPE?
d(c,b):c.type!==e.SHOWROOM_MAIN_IMAGE_TYPE&&(b.type===p.SWATCH_HOVER?c.color===l.getCurrentItem().color&&l.getCurrentItem().type===e.SHOWROOM_THUMBNAIL_TYPE?g.showShowroomMainImage(h):g.hideShowroomMainImage(h):f.isImageBlockGridViewHoverDelayEnabled()?(l.setToPreviousItem(),"mouseenter"===b.type&&(v&&clearTimeout(v),v=setTimeout(function(){l.setToCurrentItem(c);g.hideShowroomMainImage(h)},f.getHoveringDelayTimer())),"mouseleave"===b.type&&v&&clearTimeout(v),"click"===b.type&&(l.setToCurrentItem(c),
g.hideShowroomMainImage(h))):g.hideShowroomMainImage(h))}catch(D){}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE,new Date-r)};(c=document.getElementById("ivShowroomTabHeading"))&&c.addEventListener("click",function(b){a.addOne(a.COUNTER_NAMES.TAB_SELECT);b=m.getDataForAsin(y).defaultStageId;b=a.createShowroomAtfEvent(b,y,a.EVENT_NAMES.IMMERSIVE_VIEW_TAB_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(b)});a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE,new Date-t)}});
"use strict";k.register("showroom-image-block-constants",function(){return{SHOWROOM_THUMBNAIL_TYPE:"showroom-image",SHOWROOM_MAIN_IMAGE_TYPE:"showroom-main-image",TWISTER_DATA_EVENT:"showroomTwisterData",STRING_IDS:{MAIN_IMAGE_OVERLAY_TEXT:"showroom_dp_imageblock_atf_main_image_overlay_text",MAIN_IMAGE_OVERLAY_BUTTON_TEXT:"showroom_dp_imageblock_atf_main_image_overlay_text_T2",MAIN_IMAGE_OVERLAY_ICON_URL:"showroom_dp_imageblock_atf_main_image_overlay_icon_url"}}});"use strict";k.when("A","jQuery",
"imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-constants","showroom-image-block-metrics").register("showroom-image-block-detail-page-rendering",function(b,f,m,g,e,a){function c(b){a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT);var c=a.createShowroomAtfEvent(n,k,a.EVENT_NAMES.IMAGEBLOCK_MAIN_IMAGE_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(c);d(b)}function d(a){a.action="showroomIngressClick";a.data=l;p.dispatch("showroomIngressClick",a)}var k,p,
n,l;return{createThumbnail:function(a,b,c,f){c===a.maxAlts&&(b.find(".item.imageThumbnail").last().remove(),c--);l={type:"showroomIngress",index:0,thumbnailIndex:c,variant:f.variant};m.createThumbnail({type:e.SHOWROOM_THUMBNAIL_TYPE,index:0,thumbnailIndex:c,variant:f.variant},f.thumb,b,"showroom-imageblock-thumbnail");c++;return c},updateMainImage:function(a,d){var h=a.find("#showroom-main-image");h.length?h.attr("src",d.hiRes):(h=g.getStringValue(e.STRING_IDS.MAIN_IMAGE_OVERLAY_BUTTON_TEXT),h=f(('\x3cdiv id\x3d"showroom-main-image-container"\x3e                    \x3cbutton class\x3d"a-button" style\x3d"border-width: 0"\x3e\n                        \x3cimg src\x3d"'+
d.hiRes+'" id\x3d"showroom-main-image" alt\x3d"'+h+'"/\x3e                    \x3c/button\x3e\n                \x3c/div\x3e').trim()),h.appendTo(a),b.declarative.create(a,"showroom-image-action",l),b.declarative("showroom-image-action",["click"],c),h.addClass("image-gradient-hue"),d=g.getStringValue(e.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT),h=g.getStringValue(e.STRING_IDS.MAIN_IMAGE_OVERLAY_BUTTON_TEXT),f(('\x3cdiv id\x3d"showroom-main-image-overlay-container"\x3e                    \x3cdiv style\x3d"padding-bottom: 7px;width: 40%;"\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-subtext"\x3e'+
d+'\x3c/span\x3e                    \x3c/div\x3e                    \x3cbutton class\x3d"a-button a-button-base"\x3e                        \x3cspan class\x3d"a-button-inner"\x3e                            \x3cspan class\x3d"a-button-text" id\x3d"showroom-main-image-overlay-button"\x3e                                \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"https://m.media-amazon.com/images/G/01/showroom/icon-lightbulb._CB628497379_.png" alt\x3d""/\x3e'+h+"\n                            \x3c/span\x3e                        \x3c/span\x3e                    \x3c/button\x3e                \x3c/div\x3e").trim()).appendTo(a))},
hideShowroomMainImage:function(a){a.parent().css("z-index",-1);a.parent().addClass("aok-hidden")},showShowroomMainImage:function(a){a.parent().css("z-index",2);a.parent().removeClass("aok-hidden")},isShowroomMainImageHidden:function(){return f("#showroom-outer-container").hasClass("aok-hidden")},handleShowroomIngressClick:d,handleShowroomThumbnailClick:function(b){a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT);var c=a.createShowroomAtfEvent(n,k,a.EVENT_NAMES.IMAGEBLOCK_THUMBNAIL_CLICK,
a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(c);d(b)},handleShowroomMainImageClick:c,refresh:function(a,b,c){p=a;k=b;n=c}}});"use strict";k.when("A").register("showroom-image-block-metrics",function(b){return{EVENT_NAMES:{IMAGEBLOCK_LOAD:"srm_atf_imageBlock_load",IMAGEBLOCK_THUMBNAIL_CLICK:"srm_atf_thumbnail_click",IMAGEBLOCK_MAIN_IMAGE_CLICK:"srm_atf_main_image_click",IMMERSIVE_VIEW_TAB_CLICK:"srm_atf_iv_tab_click"},COUNTER_NAMES:{SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED:"showroom:atf:imageBlock:feature:render",
SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER:"showroom:atf:imageBlock:thumbnail:hover",SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT:"showroom:atf:imageBlock:thumbnail:select",SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT:"showroom:atf:imageBlock:mainImage:select",SHOWROOM_IMAGEBLOCK_FAILED_TO_INITIALIZED_WEBLAB_TRIGGER:"showroom:atf:imageBlock:failedToInitializeWeblabTrigger",TAB_SELECT:"showroom:atf:tab:select"},STATUS_TYPES:{SUCCESS:"success",ERROR:"error"},TIMER_NAMES:{SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE:"showroom:atf:imageBlock:latency:invoke",
SHOWROOM_IMAGEBLOCK_LATENCY_LOAD:"showroom:atf:imageBlock:latency:load",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER:"showroom:atf:imageBlock:latency:render",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN:"showroom:atf:imageBlock:latency:render:getDataForAsin",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE:"showroom:atf:imageBlock:latency:render:updateMainImage",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:createThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UTIL_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:utilCreateThumbnail",
SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING:"showroom:atf:imageBlock:latency:render:unhideTabHeading",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT:"showroom:atf:imageBlock:latency:render:logEvent",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE:"showroom:atf:imageBlock:latency:update",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT:"showroom:atf:imageBlock:latency:update:handleThumbnailEvent"},addOne:function(b){try{if(d.ue&&b){var f=(d.ue.count(b)||0)+1;d.ue.count(b,f)}}catch(g){}},logValue:function(b,
m){try{d.ue&&b&&"number"===typeof m&&d.ue.count(b,m)}catch(g){}},createShowroomAtfEvent:function(f,d,g,e){var a={};a.showroomId=f;a.asin=d;a.eventType=g;a.status=e;a.device=b.capabilities?b.capabilities.isAmazonApp?"AmazonApp":b.capabilities.mobile?"mobile":b.capabilities.tablet?"tablet":"desktop":"";a.userAgent=navigator?navigator.userAgent:"";a.producerId="showroom_atf";a.schemaId="com.amazon.showroom.ingress.clientEvent.3";return a},logShowroomAtfEvent:function(b){try{d.ue&&d.ue.event&&b&&d.ue.event(b,
"showroom_atf","com.amazon.showroom.ingress.clientEvent.3")}catch(m){}}}});"use strict";k.when("A","showroom-image-block-constants").register("showroom-lite-atf-feature-data",function(b,d){function f(){return e[a]}function g(a){return a in e}var e={},a;return{setData:function(c){c&&c.asin&&c.imageDomain&&c.defaultCollageUrl&&c.defaultStageId&&Array.isArray(c.itemMainImagePhysicalIds)&&(a=c.asin,g(c.asin)||(e[c.asin]=c,b.trigger(d.TWISTER_DATA_EVENT,c.asin)))},getDataForCurrentAsin:f,getDataForAsin:function(a){return e[a]},
getStringValue:function(a){return f().displayStrings?f().displayStrings[a]:""},isDataValidForAsin:g}})});
/* ******** */
